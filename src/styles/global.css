@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Custom Properties - mirrors Tailwind semantic tokens for use in scoped styles */
:root {
  /* Text colors */
  --color-text-primary: rgb(15, 23, 42); /* slate-900 */
  --color-text-secondary: rgb(71, 85, 105); /* slate-600 */
  --color-text-tertiary: rgb(148, 163, 184); /* slate-400 */
  --color-text-inverse: #ffffff;

  /* Surface colors */
  --color-surface-base: #ffffff;
  --color-surface-subtle: #fafafa;
  --color-surface-elevated: #f5f5f5;
  --color-surface-dark: rgb(15, 23, 42); /* slate-900 */

  /* Border colors */
  --color-border: rgb(226, 232, 240); /* slate-200 */
  --color-border-subtle: rgba(226, 232, 240, 0.5);
  --color-border-hover: rgb(203, 213, 225); /* slate-300 */

  /* Accent colors */
  --color-accent-primary: rgb(15, 23, 42);
  --color-accent-hover: rgb(30, 41, 59);
  --color-accent-secondary: rgb(71, 85, 105);
}

/* Base typography and layout */
@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-surface-base text-primary;
    font-feature-settings:
      "kern" 1,
      "liga" 1,
      "calt" 1;
    /* Use dynamic viewport height where supported to avoid iOS white gaps */
    min-height: 100vh;
    @supports (height: 100dvh) {
      min-height: 100dvh;
    }
    overflow-x: hidden; /* prevent accidental horizontal page scroll on mobile */
  }

  /* Clean typography */
  h1 {
    @apply text-4xl sm:text-5xl lg:text-6xl font-normal tracking-tight text-primary;
    line-height: 1.2;
  }
  h2 {
    @apply text-2xl sm:text-3xl lg:text-4xl font-normal tracking-tight text-primary;
  }
  h3 {
    @apply text-xl sm:text-2xl font-medium text-primary;
  }
  p {
    @apply text-base leading-relaxed text-secondary;
  }
}

/* Viewport utilities: dvh fallback for full-height sections */
.min-h-vh-fix {
  min-height: 100vh;
}
@supports (height: 100dvh) {
  .min-h-vh-fix {
    min-height: 100dvh;
  }
}

/* Safe area helpers for notched screens */
.pt-safe {
  padding-top: env(safe-area-inset-top);
}

/* Container utilities */
.container-lg {
  @apply mx-auto max-w-7xl px-6 sm:px-8 lg:px-12;
}

.container-narrow {
  @apply mx-auto max-w-4xl px-6 sm:px-8;
}

/* Minimal button styles */
@layer components {
  /* Base button styles - square corners, consistent padding */
  .btn {
    @apply inline-flex items-center justify-center rounded px-6 py-3 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }

  /* Primary button - filled dark */
  .btn-primary {
    @apply bg-surface-dark text-inverse hover:bg-accent-hover focus:ring-accent-primary;
  }

  /* Secondary button - outlined */
  .btn-secondary {
    @apply bg-surface-base text-primary hover:bg-surface-subtle focus:ring-accent-primary border border-primary;
  }

  /* Large button variant */
  .btn-lg {
    @apply px-8 py-4 text-base;
  }

  /* Small button variant */
  .btn-sm {
    @apply px-4 py-2 text-sm;
  }

  /* Text-only button */
  .btn-text {
    @apply bg-transparent text-secondary hover:text-primary hover:bg-surface-subtle border-transparent;
  }
}

/* Simple card component */
.card {
  @apply rounded-lg border border-border bg-surface-base p-6 sm:p-8;
}

/* Section spacing */
.section {
  @apply container-lg py-20 sm:py-32;
}

.section-narrow {
  @apply container-narrow py-20 sm:py-32;
}

/* Simple icon container */
.icon-feature {
  @apply flex h-12 w-12 items-center justify-center rounded-lg bg-surface-subtle;
}

.icon-feature svg {
  @apply h-6 w-6 text-secondary;
}

/* Divider */
.divider {
  @apply border-t border-border;
}

/* Typography utilities for consistent section headers */
.eyebrow {
  @apply text-sm sm:text-base font-semibold text-secondary uppercase tracking-wider;
}

.section-title {
  @apply text-3xl sm:text-4xl lg:text-5xl font-normal text-primary tracking-tight;
}

.section-description {
  @apply text-base sm:text-lg text-secondary leading-relaxed;
}

/* Hero-specific typography - distinct hierarchy */
.hero-headline {
  @apply text-3xl sm:text-4xl lg:text-5xl font-medium text-primary;
  letter-spacing: -0.025em;
  line-height: 1.15;
}

.hero-tagline {
  @apply text-lg sm:text-xl text-primary leading-relaxed max-w-3xl mx-auto;
  font-weight: 400;
}

.hero-detail {
  @apply text-sm sm:text-base text-secondary leading-relaxed max-w-xl mx-auto;
}

/* Interactive Flow/Timeline */
.flow-container {
  @apply flex items-center justify-center gap-0 sm:gap-1;
}

.flow-step {
  @apply flex flex-col items-center gap-1 sm:gap-2 cursor-pointer transition-all duration-300;
  min-width: 60px;
}

@media (min-width: 640px) {
  .flow-step {
    min-width: 90px;
  }
}

.flow-step:hover .flow-icon {
  @apply border-secondary;
  transform: scale(1.05);
}

.flow-icon {
  @apply flex items-center justify-center w-9 h-9 sm:w-12 sm:h-12 rounded-full bg-surface-base/90 text-secondary border-2 border-border transition-all duration-300;
  backdrop-filter: blur(4px);
}

.flow-icon svg {
  @apply w-4 h-4 sm:w-5 sm:h-5;
}

.flow-step-active .flow-icon {
  @apply bg-surface-dark text-inverse border-transparent;
  transform: scale(1.1);
}

.flow-label {
  @apply text-[10px] sm:text-sm font-medium text-secondary transition-colors duration-300;
}

.flow-step-active .flow-label {
  @apply text-primary font-semibold;
}

/* Connector lines between steps */
.flow-connector {
  @apply flex self-start;
  margin-top: calc((2.25rem - 2px) / 2); /* center with h-9 icon */
  margin-left: -2px;
  margin-right: -2px;
}

@media (min-width: 640px) {
  .flow-connector {
    margin-top: calc((3rem - 2px) / 2); /* center with h-12 icon */
    margin-left: -6px;
    margin-right: -6px;
  }
}

.flow-line {
  @apply w-4 sm:w-10 bg-border transition-colors duration-500;
  height: 1px;
}

.flow-connector-active .flow-line {
  @apply bg-surface-dark;
}

/* Content panels */
.flow-content {
  @apply relative min-h-[80px];
}

.flow-panel {
  @apply absolute inset-0 flex flex-col items-center justify-center opacity-0 transition-all duration-500;
  transform: translateY(10px);
  pointer-events: none;
}

.flow-panel-active {
  @apply opacity-100;
  transform: translateY(0);
  pointer-events: auto;
}

.flow-description {
  @apply text-base sm:text-lg text-secondary max-w-xl mx-auto leading-relaxed;
}

/* Page title (H1) utilities */
.page-title {
  @apply text-4xl sm:text-5xl font-normal text-primary;
}

/* Scroll-triggered animations */
.animate-on-scroll {
  opacity: 0;
  transform: translateY(30px);
  transition:
    opacity 0.6s ease-out,
    transform 0.6s ease-out;
}

.animate-on-scroll.is-visible {
  opacity: 1;
  transform: translateY(0);
}

/* Stagger children animations */
.stagger-children > * {
  opacity: 0;
  transform: translateY(30px);
  transition:
    opacity 0.6s ease-out,
    transform 0.6s ease-out;
}

.stagger-children.is-visible > *:nth-child(1) {
  transition-delay: 0s;
  opacity: 1;
  transform: translateY(0);
}
.stagger-children.is-visible > *:nth-child(2) {
  transition-delay: 0.1s;
  opacity: 1;
  transform: translateY(0);
}
.stagger-children.is-visible > *:nth-child(3) {
  transition-delay: 0.2s;
  opacity: 1;
  transform: translateY(0);
}
.stagger-children.is-visible > *:nth-child(4) {
  transition-delay: 0.3s;
  opacity: 1;
  transform: translateY(0);
}
.stagger-children.is-visible > *:nth-child(5) {
  transition-delay: 0.4s;
  opacity: 1;
  transform: translateY(0);
}
.stagger-children.is-visible > *:nth-child(6) {
  transition-delay: 0.5s;
  opacity: 1;
  transform: translateY(0);
}
.stagger-children.is-visible > *:nth-child(7) {
  transition-delay: 0.6s;
  opacity: 1;
  transform: translateY(0);
}
.stagger-children.is-visible > *:nth-child(8) {
  transition-delay: 0.7s;
  opacity: 1;
  transform: translateY(0);
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .animate-on-scroll,
  .stagger-children > * {
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
  }
}
