---
/**
 * HowItWorksSection
 *
 * Section 7: "How Return Signals works"
 * Visual steps with icons and connecting flow
 */

interface Props {
  className?: string
}

const { className = '' } = Astro.props

const steps = [
  {
    title: 'Check in after delivery',
    description: 'A proactive SMS that feels human, not automated. Low-effort for the customer.',
    icon: '/icons/color/text.svg',
  },
  {
    title: "Follow up on their timeline",
    description: "If they haven't tried it yet, no problem. Snooze, schedule, check back later.",
    icon: '/icons/color/calendar.svg',
  },
  {
    title: 'Resolve issues with text + photo',
    description: 'Quick troubleshooting when possible. Photo confirmation when needed to see what they see.',
    icon: '/icons/color/camera.svg',
  },
  {
    title: 'Route to the right outcome',
    description: 'Exchange, return, scrap at customer, ship for rework, or restock—based on policy and item economics.',
    icon: '/icons/color/route.svg',
  },
]
---

<section class={`relative py-20 sm:py-32 overflow-hidden ${className}`}>
  <!-- Subtle gradient background -->
  <div class="absolute inset-0 bg-surface-base"></div>

  <div class="relative max-w-4xl mx-auto px-6 sm:px-8">

    <h2 class="text-3xl sm:text-4xl lg:text-5xl font-normal tracking-tight text-primary mb-6 animate-on-scroll">
      How it works
    </h2>

    <p class="text-lg text-secondary mb-16 max-w-2xl animate-on-scroll">
      Not magic—just a workflow designed to resolve issues before they become returns.
    </p>

    <!-- Steps with icons and connecting line -->
    <div class="relative">
      <!-- Vertical connecting line (hidden on mobile) -->
      <div class="hidden sm:block absolute left-7 top-8 bottom-8 w-px bg-gradient-to-b from-border/40 via-border to-border/40"></div>

      <div class="space-y-8 sm:space-y-12">
        {steps.map((step, i) => (
          <div class="relative grid grid-cols-[auto,1fr] gap-5 sm:gap-8 animate-on-scroll group">
            <!-- Icon container -->
            <div class="relative z-10 flex items-center justify-center w-14 h-14 rounded-2xl bg-surface-base border-2 border-border group-hover:border-primary/30 group-hover:shadow-lg transition-all duration-300">
              <img
                src={step.icon}
                alt=""
                class="w-8 h-8"
              />
            </div>

            <!-- Content -->
            <div class="pt-2">
              <h3 class="text-xl sm:text-2xl font-medium text-primary mb-2">
                {step.title}
              </h3>
              <p class="text-base sm:text-lg text-secondary leading-relaxed max-w-xl">
                {step.description}
              </p>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- CTA -->
    <div class="text-center mt-16 sm:mt-20 animate-on-scroll">
      <div class="inline-block bg-surface-base border border-border rounded-lg p-8 sm:p-12 shadow-soft">
        <h3 class="text-2xl sm:text-3xl font-normal tracking-tight text-primary mb-4">
          Want to pilot this?
        </h3>

        <p class="text-base sm:text-lg text-secondary mb-8 max-w-md mx-auto">
          We're working with a few brands to refine the product. If you own post-purchase, let's talk.
        </p>

        <a
          href="https://form.typeform.com/to/sJUkURjA"
          target="_blank"
          rel="noopener noreferrer"
          class="btn btn-primary btn-lg"
        >
          Request pilot
        </a>
      </div>
    </div>

  </div>
</section>
