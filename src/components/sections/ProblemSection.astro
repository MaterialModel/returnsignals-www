---
/**
 * ProblemSection â€” Visual hierarchy through typography
 */
import FullViewportSection from "@layouts/FullViewportSection.astro";

interface Props {
  className?: string;
}

const { className = "" } = Astro.props;

const items = [
  {
    stat: "39%",
    statNote: "of returns",
    problem: "Bad fit",
    problemDesc: "Is the size  wrong or they are wearing it wrong?",
    solution: "Proactive check-in",
    solutionDesc: "Diagnose proper use and provide accurate size advice.",
  },
  {
    stat: "28%",
    statNote: "of returns",
    problem: "Looks different",
    problemDesc: "Color or fabric doesn't match photos. Is it real?",
    solution: "Photo verification",
    solutionDesc: "See what they see. Confirm or flag the issue.",
  },
  {
    stat: "$27",
    statNote: "per return",
    problem: "Item is damaged",
    problemDesc: "Loose thread or real problem?",
    solution: "Visual triage",
    solutionDesc: "Photo confirms severity. Decide without shipping.",
  },
  {
    stat: "$5",
    statNote: "inspection and routing cost",
    problem: "Blind routing",
    problemDesc: "Every return takes the same expensive path.",
    solution: "Smart disposition",
    solutionDesc: "Route by condition: restock, rework, or scrap.",
  },
];
---

<FullViewportSection class={className}>
  <div id="problem-section" class="problem-wrapper">
    <!-- Header -->
    <div class="text-center mb-10 sm:mb-14">
      <h2 class="section-title mb-4">
        Engage before the customer<br/>starts a return.
      </h2>
      <p class="text-lg sm:text-xl text-primary leading-relaxed max-w-3xl mx-auto">
        If a return is inevitable, use photo evidence to make intelligent item-level disposition decisions.
      </p>
    </div>

    <!-- Items -->
    <div class="items">
      {items.map((item) => (
        <div class="item">
          <div class="item-stat">
            <span class="stat-value">{item.stat}</span>
            <span class="stat-note">{item.statNote}</span>
          </div>

          <div class="item-content">
            <div class="item-problem">
              <h3 class="problem-title">{item.problem}</h3>
              <p class="problem-desc">{item.problemDesc}</p>
            </div>
            <div class="item-solution">
              <h3 class="solution-title">{item.solution}</h3>
              <p class="solution-desc">{item.solutionDesc}</p>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</FullViewportSection>

<style>
  .problem-wrapper {
    max-width: 56rem;
    margin: 0 auto;
    padding-top: 2rem;
    padding-bottom: 4rem;
  }
  @media (min-width: 640px) {
    .problem-wrapper {
      padding-top: 0;
      padding-bottom: 0;
    }
  }

  .column-labels {
    display: none;
  }
  @media (min-width: 640px) {
    .column-labels {
      display: grid;
      grid-template-columns: 4.5rem 1fr 1fr;
      gap: 1.5rem;
      margin-bottom: 1rem;
      padding-left: 0.25rem;
    }
  }

  .label-spacer {
    /* Empty spacer to align with stat column */
  }

  .label {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--color-text-secondary);
  }
  .label:first-of-type {
    padding-right: 1.5rem;
  }

  .items {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .item {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.75rem;
    align-items: start;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--color-border);
  }
  .item:last-child {
    border-bottom: none;
    padding-bottom: 0;
  }
  @media (min-width: 640px) {
    .item {
      grid-template-columns: 4.5rem 1fr 1fr;
      gap: 1.5rem;
      align-items: center;
      padding-bottom: 0;
      border-bottom: none;
    }
  }

  .item-stat {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
  }
  @media (min-width: 640px) {
    .item-stat {
      display: block;
      text-align: center;
    }
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    line-height: 1;
    color: var(--color-text-primary);
  }
  @media (min-width: 640px) {
    .stat-value {
      font-size: 1.75rem;
    }
  }

  .stat-note {
    font-size: 0.5625rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-primary);
  }
  @media (min-width: 640px) {
    .stat-note {
      display: block;
      margin-top: 0.25rem;
    }
  }

  .item-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }
  @media (min-width: 640px) {
    .item-content {
      display: contents;
    }
  }

  .item-problem {
    padding-right: 1rem;
    border-right: 1px solid var(--color-border);
  }
  @media (min-width: 640px) {
    .item-problem {
      padding-right: 1.5rem;
    }
  }

  .problem-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: 0.25rem;
  }

  .problem-desc {
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--color-text-primary);
  }

  .solution-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: 0.25rem;
  }

  .solution-desc {
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--color-text-primary);
  }
</style>
