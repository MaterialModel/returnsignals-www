---
/**
 * ProblemSection — Variant 1
 * Signal → Concierge response (keeps stats, improves tone + exchange framing)
 */
import FullViewportSection from "@layouts/FullViewportSection.astro";

interface Props {
  className?: string;
}

const { className = "" } = Astro.props;

const items = [
  {
    stat: "39%",
    statNote: "of return requests",
    problem: "Fit uncertainty",
    problemDesc: "Wrong size or cut for their preferences.",
    solution: "Associate-style sizing help",
    solutionDesc:
      "Confirm the issue then recommend the best size or a better-fitting style and start an exchange in-thread.",
  },
  {
    stat: "28%",
    statNote: "of return requests",
    problem: "Expectation mismatch",
    problemDesc: "Color or fabric doesn't match what they want.",
    solution: "Photo check + best-match exchange",
    solutionDesc:
      "See what they see then swap to the shade/feel they actually want.",
  },
  {
    stat: "$27",
    statNote: "avg. handling cost",
    problem: "Quality concern",
    problemDesc: "Minor flaw or a real defect.",
    solution: "Photo-based resolution",
    solutionDesc:
      "Use a quick photo to decide the right fix: replace, rework, or keep-it.",
  },
];
---

<FullViewportSection class={className}>
  <div id="problem-section" class="problem-wrapper">
    <!-- Header -->
    <div class="text-center mb-10 sm:mb-14">
      <h2 class="section-title mb-4">Treat returns like hospitality</h2>
      <p
        class="text-lg sm:text-xl text-primary leading-relaxed max-w-3xl mx-auto"
      >
        The moment a customer considers returning is your best chance to earn
        loyalty. Return Signals brings the “great associate” experience to
        ecommerce.
      </p>
    </div>

    <!-- Column labels (desktop) -->
    <div class="column-labels" aria-hidden="true">
      <div class="label-spacer"></div>
      <div class="label">Customer signal</div>
      <div class="label">Concierge response</div>
    </div>

    <!-- Items -->
    <div class="items">
      {
        items.map((item) => (
          <div class="item">
            <div class="item-stat">
              <span class="stat-value">{item.stat}</span>
              <span class="stat-note">{item.statNote}</span>
            </div>

            <div class="item-content">
              <div class="item-problem">
                <h3 class="problem-title">{item.problem}</h3>
                <p class="problem-desc">{item.problemDesc}</p>
              </div>

              <div class="item-solution">
                <h3 class="solution-title">{item.solution}</h3>
                <p class="solution-desc">{item.solutionDesc}</p>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</FullViewportSection>

<style>
  .problem-wrapper {
    max-width: 56rem;
    margin: 0 auto;
    padding-top: 2rem;
    padding-bottom: 4rem;
  }
  @media (min-width: 640px) {
    .problem-wrapper {
      padding-top: 0;
      padding-bottom: 0;
    }
  }

  .column-labels {
    display: none;
  }
  @media (min-width: 640px) {
    .column-labels {
      display: grid;
      grid-template-columns: 4.5rem 0.85fr 1.5fr;
      gap: 1.5rem;
      margin-bottom: 1rem;
      padding-left: 0.25rem;
    }
    .column-labels .label-spacer {
      padding-right: 0.5rem;
    }
  }

  .label-spacer {
    /* aligns with stat column */
  }

  .label {
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.075em;
    color: var(--color-text-tertiary);
  }

  .items {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .item {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.75rem;
    align-items: start;
    padding-bottom: 1.5rem;
  }
  .item:last-child {
    padding-bottom: 0;
  }
  @media (min-width: 640px) {
    .item {
      grid-template-columns: 4.5rem 0.85fr 1.5fr;
      gap: 1.5rem;
      align-items: start;
      padding-bottom: 0;
    }
  }

  .item-stat {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
  }
  @media (min-width: 640px) {
    .item-stat {
      display: block;
      text-align: center;
      margin-top: 0.125rem;
      padding-right: 0.5rem;
    }
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    line-height: 1;
    color: var(--color-text-primary);
  }
  @media (min-width: 640px) {
    .stat-value {
      font-size: 1.75rem;
    }
  }

  .stat-note {
    font-size: 0.5625rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-primary);
  }
  @media (min-width: 640px) {
    .stat-note {
      display: block;
      margin-top: 0.25rem;
    }
  }

  .item-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }
  @media (min-width: 640px) {
    .item-content {
      display: contents;
    }
  }

  .item-problem {
    padding-right: 1rem;
  }
  @media (min-width: 640px) {
    .item-problem {
      padding-right: 0;
    }
  }

  .problem-title,
  .solution-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: 0.25rem;
  }

  .problem-desc,
  .solution-desc {
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--color-text-primary);
  }
</style>
