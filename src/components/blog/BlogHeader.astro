---
import Tags from "@components/shared/Tags.astro";

export interface Props {
  title: string;
  description?: string;
  date: Date;
  updatedDate?: Date;
  author?: string;
  authorImage?: string;
  readingTime: number;
  tags?: string[];
  image?: string;
  imageAlt?: string;
}

const {
  title,
  description,
  date,
  updatedDate,
  author = "Return Signals Team",
  authorImage,
  readingTime,
  tags = [],
  image,
  imageAlt,
} = Astro.props;

const formatDate = (date: Date) => {
  const d = new Date(date);
  const year = d.getUTCFullYear();
  const month = d.toLocaleDateString("en-US", {
    month: "long",
    timeZone: "UTC",
  });
  const day = d.getUTCDate();
  return `${month} ${day}, ${year}`;
};
---

<header class="mb-8">
  <div class="mb-8">
    <div class="mb-4">
      <Tags tags={tags} clickable={true} />
    </div>

    <h1 class="blog-post-title mb-4">
      {title}
    </h1>

    {description && <p class="text-xl text-secondary">{description}</p>}

    <div class="flex flex-wrap items-center gap-4 mt-6 text-secondary">
      <div class="flex items-center gap-3">
        {
          authorImage && (
            <img
              src={authorImage}
              alt={author}
              class="w-7 h-7 rounded-full object-cover"
            />
          )
        }
        <span class="font-medium">{author}</span>
      </div>

      <span class="text-border hidden sm:inline">•</span>

      <div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4">
        <time datetime={date.toISOString()}>
          Published: {formatDate(date)}
        </time>
        {
          updatedDate && (
            <>
              <span class="text-border hidden sm:inline">•</span>
              <time
                datetime={updatedDate.toISOString()}
                class="text-tertiary text-sm"
              >
                Updated: {formatDate(updatedDate)}
              </time>
            </>
          )
        }
      </div>

      <span class="text-border hidden sm:inline">•</span>

      <span>{readingTime} min read</span>
    </div>
  </div>

  {
    image && (
      <div
        class="overflow-hidden bg-surface-elevated"
        style="border-radius: 0.75rem;"
      >
        <img
          src={image}
          alt={imageAlt || title}
          width="1200"
          height="630"
          class="w-full h-auto"
        />
      </div>
    )
  }
</header>
