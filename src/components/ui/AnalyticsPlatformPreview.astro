---
/**
 * Analytics Platform Preview Component
 *
 * Full-featured analytics dashboard demo for Return Signals
 * Shows 5 sections: Overview, Interventions, Products, Impact, Configuration
 * Users can click navigation to switch between views
 */

interface Props {
  className?: string;
}

const { className = "" } = Astro.props;
---

<div
  class={`analytics-platform-preview ${className}`}
  role="region"
  aria-label="Return Signals analytics platform demo with Overview, Interventions, Products, Impact, and Configuration sections"
>
  <!-- Container Frame (looks like a real app) -->
  <div
    class="analytics-container mx-auto max-w-[1100px] bg-surface-base border border-border rounded-xl shadow-2xl overflow-hidden"
  >
    <!-- Desktop Hint Banner -->
    <div
      class="desktop-hint hidden sm:block bg-accent-primary/5 border-b border-accent-primary/20 px-6 py-2"
    >
      <p
        class="text-xs text-accent-primary text-center italic flex items-center justify-center gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-3.5 w-3.5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
          ></path>
        </svg>
        Click navigation on the left to explore different sections
      </p>
    </div>

    <!-- App Layout: Sidebar + Main Content -->
    <div class="app-layout flex">
      <!-- Left Sidebar Navigation -->
      <aside
        class="sidebar hidden sm:flex flex-col w-56 bg-surface-dark border-r border-border/20"
      >
        <!-- Logo Area -->
        <div class="sidebar-header px-4 py-5 border-b border-border/20">
          <div class="flex items-center gap-2">
            <div
              class="w-7 h-7 rounded bg-accent-primary flex items-center justify-center"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4 text-inverse"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                ></path>
              </svg>
            </div>
            <span class="text-sm font-semibold text-inverse"
              >Return Signals</span
            >
          </div>
        </div>

        <!-- Navigation Menu -->
        <nav class="sidebar-nav flex-1 px-3 py-4 space-y-1 pt-6">
          <button
            data-view="overview"
            class="nav-item active flex items-center gap-3 px-3 py-2 rounded text-sm font-medium text-inverse bg-accent-primary/10 w-full text-left"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
              ></path>
            </svg>
            Overview
          </button>

          <button
            data-view="interventions"
            class="nav-item flex items-center gap-3 px-3 py-2 rounded text-sm text-inverse/60 hover:text-inverse hover:bg-accent-primary/5 w-full text-left"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"
              ></path>
            </svg>
            Interventions
          </button>

          <button
            data-view="products"
            class="nav-item flex items-center gap-3 px-3 py-2 rounded text-sm text-inverse/60 hover:text-inverse hover:bg-accent-primary/5 w-full text-left"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"
              ></path>
            </svg>
            Products
          </button>

          <button
            data-view="impact"
            class="nav-item flex items-center gap-3 px-3 py-2 rounded text-sm text-inverse/60 hover:text-inverse hover:bg-accent-primary/5 w-full text-left"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
              ></path>
            </svg>
            Impact
          </button>

          <button
            data-view="configuration"
            class="nav-item flex items-center gap-3 px-3 py-2 rounded text-sm text-inverse/60 hover:text-inverse hover:bg-accent-primary/5 w-full text-left"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
              ></path>
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            Configuration
          </button>
        </nav>

        <!-- User Profile -->
        <div class="sidebar-footer px-3 py-4 border-t border-border/20">
          <div class="flex items-center gap-2 px-3 py-2">
            <div
              class="w-8 h-8 rounded-full bg-accent-primary/20 flex items-center justify-center"
            >
              <span class="text-xs font-semibold text-inverse">JD</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-xs font-medium text-inverse truncate">Jane Doe</p>
              <p class="text-xs text-inverse/50 truncate">Admin</p>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content Area -->
      <div class="main-content flex-1 flex flex-col bg-surface-base">
        <!-- Mobile Hint (at very top) -->
        <div
          class="mobile-hint sm:hidden bg-accent-primary/5 border-b border-accent-primary/20 px-4 py-2"
        >
          <p
            class="text-xs text-accent-primary text-center italic flex items-center justify-center gap-2"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-3.5 w-3.5 flex-shrink-0"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
              ></path>
            </svg>
            Tap ☰ to explore different sections
          </p>
        </div>

        <!-- Top Bar -->
        <div
          class="top-bar bg-surface-base border-b border-border px-4 sm:px-6 py-3"
        >
          <div class="flex items-center justify-between gap-4">
            <!-- Left: Hamburger (mobile) + Page Title -->
            <div class="flex items-center gap-3 flex-1 min-w-0">
              <button
                class="mobile-menu-button sm:hidden p-2 -ml-2 text-primary hover:bg-surface-subtle rounded transition-colors"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
              </button>
              <div class="flex-1 min-w-0">
                <h1
                  class="view-title text-lg font-semibold text-primary mb-0.5"
                >
                  Overview
                </h1>
                <p class="view-subtitle text-xs text-secondary">
                  Prevention • Intervention • Insights
                </p>
              </div>
            </div>

            <!-- Right: Filters & Actions -->
            <div class="flex items-center gap-2">
              <!-- Date Range Picker -->
              <button
                class="filter-btn flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-secondary bg-surface-subtle border border-border rounded hover:bg-surface-elevated transition-colors"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-3.5 w-3.5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                  ></path>
                </svg>
                <span class="hidden sm:inline">Last 30 Days</span>
              </button>

              <!-- Export Button -->
              <button
                class="filter-btn flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-secondary bg-surface-subtle border border-border rounded hover:bg-surface-elevated transition-colors"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-3.5 w-3.5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                  ></path>
                </svg>
                <span class="hidden sm:inline">Export</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Views Container -->
        <div class="views-container p-4 sm:p-6 flex-1 overflow-y-auto relative">
          <!-- Overview View -->
          <div data-view-content="overview" class="view-content active">
            <div
              class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"
            >
              <!-- KPI Cards -->
              <div
                class="kpi-card bg-surface-base border border-border rounded-lg p-4"
              >
                <div class="text-sm text-secondary mb-1">Returns Prevented</div>
                <div class="text-2xl font-bold text-primary">847</div>
                <div class="text-xs text-accent-success mt-1">
                  +12% vs last month
                </div>
              </div>
              <div
                class="kpi-card bg-surface-base border border-border rounded-lg p-4"
              >
                <div class="text-sm text-secondary mb-1">Cost Saved</div>
                <div class="text-2xl font-bold text-primary">$31.2K</div>
                <div class="text-xs text-accent-success mt-1">
                  +8% vs last month
                </div>
              </div>
              <div
                class="kpi-card bg-surface-base border border-border rounded-lg p-4"
              >
                <div class="text-sm text-secondary mb-1">Active Check-ins</div>
                <div class="text-2xl font-bold text-primary">1,247</div>
                <div class="text-xs text-secondary mt-1">Awaiting response</div>
              </div>
              <div
                class="kpi-card bg-surface-base border border-border rounded-lg p-4"
              >
                <div class="text-sm text-secondary mb-1">Response Rate</div>
                <div class="text-2xl font-bold text-primary">73%</div>
                <div class="text-xs text-accent-success mt-1">
                  +5% vs last month
                </div>
              </div>
            </div>

            <!-- Activity Feed -->
            <div class="bg-surface-base border border-border rounded-lg p-4">
              <h3 class="text-sm font-semibold text-primary mb-4">
                Recent Activity
              </h3>
              <div class="space-y-3">
                <div class="activity-item flex items-start gap-3 text-sm">
                  <div
                    class="w-2 h-2 rounded-full bg-accent-success mt-1.5 flex-shrink-0"
                  >
                  </div>
                  <div class="flex-1">
                    <span class="text-primary font-medium"
                      >Return prevented</span
                    >
                    <span class="text-secondary">
                      • Classic Tee • Fit advice provided</span
                    >
                    <div class="text-xs text-tertiary mt-0.5">
                      2 minutes ago
                    </div>
                  </div>
                </div>
                <div class="activity-item flex items-start gap-3 text-sm">
                  <div
                    class="w-2 h-2 rounded-full bg-blue-500 mt-1.5 flex-shrink-0"
                  >
                  </div>
                  <div class="flex-1">
                    <span class="text-primary font-medium"
                      >Exchange initiated</span
                    >
                    <span class="text-secondary">
                      • Wrap Dress • Photo confirmed defect</span
                    >
                    <div class="text-xs text-tertiary mt-0.5">
                      15 minutes ago
                    </div>
                  </div>
                </div>
                <div class="activity-item flex items-start gap-3 text-sm">
                  <div
                    class="w-2 h-2 rounded-full bg-amber-500 mt-1.5 flex-shrink-0"
                  >
                  </div>
                  <div class="flex-1">
                    <span class="text-primary font-medium"
                      >At-customer disposal</span
                    >
                    <span class="text-secondary">
                      • Athletic Leggings • Damaged item</span
                    >
                    <div class="text-xs text-tertiary mt-0.5">1 hour ago</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Interventions View -->
          <div data-view-content="interventions" class="view-content">
            <!-- Pipeline Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
              <div
                class="stat-card bg-surface-base border border-border rounded-lg p-4"
              >
                <div class="text-sm text-secondary mb-1">Check-ins Sent</div>
                <div class="text-3xl font-bold text-primary">2,847</div>
                <div class="text-xs text-secondary mt-1">Last 30 days</div>
              </div>
              <div
                class="stat-card bg-surface-base border border-border rounded-lg p-4"
              >
                <div class="text-sm text-secondary mb-1">Response Rate</div>
                <div class="text-3xl font-bold text-primary">73%</div>
                <div class="text-xs text-accent-success mt-1">
                  +5% vs last month
                </div>
              </div>
              <div
                class="stat-card bg-surface-base border border-border rounded-lg p-4"
              >
                <div class="text-sm text-secondary mb-1">
                  Avg Resolution Time
                </div>
                <div class="text-3xl font-bold text-primary">2.1 days</div>
                <div class="text-xs text-accent-success mt-1">
                  -0.4 days improvement
                </div>
              </div>
            </div>

            <!-- Outcomes Breakdown -->
            <div
              class="bg-surface-base border border-border rounded-lg p-6 mb-6"
            >
              <h3 class="text-sm font-semibold text-primary mb-4">
                Outcomes (Last 30 Days)
              </h3>
              <div class="space-y-3">
                <div class="outcome-item">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm text-primary font-medium"
                      >Prevented (Kept)</span
                    >
                    <span class="text-sm font-bold text-accent-success"
                      >847 (42%)</span
                    >
                  </div>
                  <div
                    class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                  >
                    <div
                      class="h-full bg-accent-success rounded-full"
                      style="width: 42%"
                    >
                    </div>
                  </div>
                </div>
                <div class="outcome-item">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm text-primary font-medium"
                      >Exchanged at Source</span
                    >
                    <span class="text-sm font-bold text-primary">523 (26%)</span
                    >
                  </div>
                  <div
                    class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                  >
                    <div
                      class="h-full bg-blue-500 rounded-full"
                      style="width: 26%"
                    >
                    </div>
                  </div>
                </div>
                <div class="outcome-item">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm text-primary font-medium"
                      >At-Customer Disposal</span
                    >
                    <span class="text-sm font-bold text-primary">412 (21%)</span
                    >
                  </div>
                  <div
                    class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                  >
                    <div
                      class="h-full bg-amber-500 rounded-full"
                      style="width: 21%"
                    >
                    </div>
                  </div>
                </div>
                <div class="outcome-item">
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm text-primary font-medium"
                      >Returned</span
                    >
                    <span class="text-sm font-bold text-secondary"
                      >218 (11%)</span
                    >
                  </div>
                  <div
                    class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                  >
                    <div
                      class="h-full bg-secondary rounded-full"
                      style="width: 11%"
                    >
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Recent Conversations -->
            <div class="bg-surface-base border border-border rounded-lg p-6">
              <h3 class="text-sm font-semibold text-primary mb-4">
                Recent Check-ins
              </h3>
              <div class="space-y-3">
                <div
                  class="conversation-row flex items-center justify-between p-3 hover:bg-surface-subtle rounded cursor-pointer transition-colors"
                >
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-sm font-medium text-primary"
                        >Jacky R.</span
                      >
                      <span class="text-xs text-secondary">• Classic Tee</span>
                    </div>
                    <div class="text-xs text-secondary">
                      Fit advice provided • Kept item
                    </div>
                  </div>
                  <div class="flex items-center gap-3">
                    <span
                      class="px-2 py-1 text-xs font-medium bg-accent-success/10 text-accent-success rounded"
                      >Resolved</span
                    >
                    <span class="text-xs text-tertiary">2m ago</span>
                  </div>
                </div>
                <div
                  class="conversation-row flex items-center justify-between p-3 hover:bg-surface-subtle rounded cursor-pointer transition-colors"
                >
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-sm font-medium text-primary"
                        >Bob M.</span
                      >
                      <span class="text-xs text-secondary">• Gym Shirt</span>
                    </div>
                    <div class="text-xs text-secondary">
                      Photo confirmed defect • Exchange initiated
                    </div>
                  </div>
                  <div class="flex items-center gap-3">
                    <span
                      class="px-2 py-1 text-xs font-medium bg-blue-500/10 text-blue-600 rounded"
                      >Exchange</span
                    >
                    <span class="text-xs text-tertiary">15m ago</span>
                  </div>
                </div>
                <div
                  class="conversation-row flex items-center justify-between p-3 hover:bg-surface-subtle rounded cursor-pointer transition-colors"
                >
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-sm font-medium text-primary"
                        >Priya K.</span
                      >
                      <span class="text-xs text-secondary"
                        >• Athletic Leggings</span
                      >
                    </div>
                    <div class="text-xs text-secondary">
                      Damage confirmed • Disposed at customer
                    </div>
                  </div>
                  <div class="flex items-center gap-3">
                    <span
                      class="px-2 py-1 text-xs font-medium bg-amber-500/10 text-amber-600 rounded"
                      >Disposal</span
                    >
                    <span class="text-xs text-tertiary">1h ago</span>
                  </div>
                </div>
                <div
                  class="conversation-row flex items-center justify-between p-3 hover:bg-surface-subtle rounded cursor-pointer transition-colors"
                >
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-sm font-medium text-primary"
                        >Sarah L.</span
                      >
                      <span class="text-xs text-secondary">• Wrap Dress</span>
                    </div>
                    <div class="text-xs text-secondary">
                      Usage guidance provided • Kept item
                    </div>
                  </div>
                  <div class="flex items-center gap-3">
                    <span
                      class="px-2 py-1 text-xs font-medium bg-accent-success/10 text-accent-success rounded"
                      >Resolved</span
                    >
                    <span class="text-xs text-tertiary">2h ago</span>
                  </div>
                </div>
                <div
                  class="conversation-row flex items-center justify-between p-3 hover:bg-surface-subtle rounded cursor-pointer transition-colors"
                >
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="text-sm font-medium text-primary"
                        >Mike T.</span
                      >
                      <span class="text-xs text-secondary"
                        >• Running Shorts</span
                      >
                    </div>
                    <div class="text-xs text-secondary">
                      Awaiting customer response
                    </div>
                  </div>
                  <div class="flex items-center gap-3">
                    <span
                      class="px-2 py-1 text-xs font-medium bg-surface-elevated text-secondary rounded"
                      >Pending</span
                    >
                    <span class="text-xs text-tertiary">4h ago</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Products View -->
          <div data-view-content="products" class="view-content">
            <!-- Search/Query Interface -->
            <div
              class="mb-6 bg-surface-base border-2 border-accent-primary/30 rounded-lg p-4 nl-search-container"
            >
              <div class="flex items-center gap-3">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-accent-primary flex-shrink-0"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
                <input
                  type="text"
                  placeholder="Ask about product issues..."
                  class="nl-query-input flex-1 text-sm text-primary placeholder-tertiary bg-transparent outline-none"
                  readonly
                  value=""
                  data-full-query="What are common fit complaints for the wrap dress?"
                />
              </div>
            </div>

            <!-- Query Answer (initially hidden) -->
            <div
              class="nl-answer-container mb-6 opacity-0 max-h-0 overflow-hidden transition-all duration-500"
            >
              <div
                class="bg-accent-primary/5 border border-accent-primary/20 rounded-lg p-5"
              >
                <div class="flex items-start gap-3 mb-3">
                  <div
                    class="w-8 h-8 rounded-lg bg-accent-primary/10 flex items-center justify-center flex-shrink-0"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-4 w-4 text-accent-primary"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"
                      ></path>
                    </svg>
                  </div>
                  <div class="flex-1">
                    <h4 class="text-sm font-semibold text-primary mb-3">
                      Top fit issues customers report:
                    </h4>
                    <div class="space-y-2">
                      <div
                        class="answer-item clickable-answer opacity-0 transform translate-x-2 transition-all duration-300 cursor-pointer hover:bg-accent-primary/5 -mx-2 px-2 py-2 rounded"
                        data-issue="neckline-gapping"
                      >
                        <div class="flex items-start gap-2">
                          <span
                            class="w-1.5 h-1.5 rounded-full bg-accent-primary mt-1.5 flex-shrink-0"
                          ></span>
                          <div class="flex-1">
                            <span class="text-sm font-medium text-primary"
                              >Neckline gapping</span
                            >
                            <span class="text-sm text-secondary">
                              — 38% of complaints</span
                            >
                            <div class="text-xs text-tertiary mt-0.5">
                              Usually fixable with styling tips • Click to see
                              examples
                            </div>
                          </div>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-4 w-4 text-accent-primary flex-shrink-0 mt-1"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                            stroke-width="2"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              d="M9 5l7 7-7 7"></path>
                          </svg>
                        </div>
                      </div>
                      <div
                        class="answer-item clickable-answer opacity-0 transform translate-x-2 transition-all duration-300 cursor-pointer hover:bg-accent-primary/5 -mx-2 px-2 py-2 rounded"
                        data-issue="waist-tie"
                      >
                        <div class="flex items-start gap-2">
                          <span
                            class="w-1.5 h-1.5 rounded-full bg-accent-primary mt-1.5 flex-shrink-0"
                          ></span>
                          <div class="flex-1">
                            <span class="text-sm font-medium text-primary"
                              >Waist tie too short</span
                            >
                            <span class="text-sm text-secondary">
                              — 24% of complaints</span
                            >
                            <div class="text-xs text-tertiary mt-0.5">
                              Size up recommendation needed • Click to see
                              examples
                            </div>
                          </div>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-4 w-4 text-accent-primary flex-shrink-0 mt-1"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                            stroke-width="2"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              d="M9 5l7 7-7 7"></path>
                          </svg>
                        </div>
                      </div>
                      <div
                        class="answer-item clickable-answer opacity-0 transform translate-x-2 transition-all duration-300 cursor-pointer hover:bg-accent-primary/5 -mx-2 px-2 py-2 rounded"
                        data-issue="hem-length"
                      >
                        <div class="flex items-start gap-2">
                          <span
                            class="w-1.5 h-1.5 rounded-full bg-accent-primary mt-1.5 flex-shrink-0"
                          ></span>
                          <div class="flex-1">
                            <span class="text-sm font-medium text-primary"
                              >Hem length concerns</span
                            >
                            <span class="text-sm text-secondary">
                              — 18% of complaints</span
                            >
                            <div class="text-xs text-tertiary mt-0.5">
                              Customer expectation mismatch • Click to see
                              examples
                            </div>
                          </div>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-4 w-4 text-accent-primary flex-shrink-0 mt-1"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                            stroke-width="2"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              d="M9 5l7 7-7 7"></path>
                          </svg>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Conversations Drill-down (initially hidden) -->
            <div
              class="conversations-drilldown mb-6 opacity-0 max-h-0 overflow-hidden transition-all duration-500"
            >
              <div class="bg-surface-base border border-border rounded-lg p-5">
                <div class="flex items-center justify-between mb-4">
                  <h4 class="text-sm font-semibold text-primary issue-title">
                    Recent conversations about this issue
                  </h4>
                  <button
                    class="close-drilldown text-xs text-accent-primary hover:underline"
                    >Close</button
                  >
                </div>
                <div class="space-y-2">
                  <div
                    class="conversation-summary p-3 bg-surface-subtle rounded-lg hover:bg-surface-elevated transition-colors cursor-pointer border border-transparent hover:border-accent-primary/30"
                  >
                    <div class="flex items-start justify-between mb-2">
                      <div class="flex items-center gap-2">
                        <span class="text-sm font-medium text-primary"
                          >Jacky R.</span
                        >
                        <span class="text-xs text-tertiary">• 2 days ago</span>
                      </div>
                      <span
                        class="px-2 py-0.5 text-xs bg-accent-success/10 text-accent-success rounded"
                        >Resolved</span
                      >
                    </div>
                    <p class="text-xs text-secondary mb-2">
                      "Neckline gaps more than expected" → Provided styling tip
                      with fashion tape
                    </p>
                    <div class="text-xs text-accent-primary font-medium">
                      Tap to see full chat log →
                    </div>
                  </div>
                  <div
                    class="conversation-summary p-3 bg-surface-subtle rounded-lg hover:bg-surface-elevated transition-colors cursor-pointer border border-transparent hover:border-accent-primary/30"
                  >
                    <div class="flex items-start justify-between mb-2">
                      <div class="flex items-center gap-2">
                        <span class="text-sm font-medium text-primary"
                          >Emma S.</span
                        >
                        <span class="text-xs text-tertiary">• 5 days ago</span>
                      </div>
                      <span
                        class="px-2 py-0.5 text-xs bg-accent-success/10 text-accent-success rounded"
                        >Resolved</span
                      >
                    </div>
                    <p class="text-xs text-secondary mb-2">
                      "Worried about neckline fit" → Demonstrated proper tying
                      technique
                    </p>
                    <div class="text-xs text-accent-primary font-medium">
                      Tap to see full chat log →
                    </div>
                  </div>
                  <div
                    class="conversation-summary p-3 bg-surface-subtle rounded-lg hover:bg-surface-elevated transition-colors cursor-pointer border border-transparent hover:border-accent-primary/30"
                  >
                    <div class="flex items-start justify-between mb-2">
                      <div class="flex items-center gap-2">
                        <span class="text-sm font-medium text-primary"
                          >Lisa M.</span
                        >
                        <span class="text-xs text-tertiary">• 1 week ago</span>
                      </div>
                      <span
                        class="px-2 py-0.5 text-xs bg-blue-500/10 text-blue-600 rounded"
                        >Exchange</span
                      >
                    </div>
                    <p class="text-xs text-secondary mb-2">
                      "Neckline won't stay in place" → Size issue, exchanged for
                      smaller
                    </p>
                    <div class="text-xs text-accent-primary font-medium">
                      Tap to see full chat log →
                    </div>
                  </div>
                  <div
                    class="conversation-summary p-3 bg-surface-subtle rounded-lg hover:bg-surface-elevated transition-colors cursor-pointer border border-transparent hover:border-accent-primary/30"
                  >
                    <div class="flex items-start justify-between mb-2">
                      <div class="flex items-center gap-2">
                        <span class="text-sm font-medium text-primary"
                          >Ana P.</span
                        >
                        <span class="text-xs text-tertiary">• 1 week ago</span>
                      </div>
                      <span
                        class="px-2 py-0.5 text-xs bg-accent-success/10 text-accent-success rounded"
                        >Resolved</span
                      >
                    </div>
                    <p class="text-xs text-secondary mb-2">
                      "Gaps when I move" → Suggested inner tie adjustment,
                      customer satisfied
                    </p>
                    <div class="text-xs text-accent-primary font-medium">
                      Tap to see full chat log →
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Top Problem Products -->
            <div
              class="bg-surface-base border border-border rounded-lg p-6 mb-6"
            >
              <h3 class="text-sm font-semibold text-primary mb-4">
                Top Problem Products
              </h3>
              <div class="overflow-x-auto">
                <table class="w-full text-sm">
                  <thead class="border-b border-border">
                    <tr>
                      <th class="text-left py-2 px-2 font-medium text-secondary"
                        >Product</th
                      >
                      <th
                        class="text-right py-2 px-2 font-medium text-secondary"
                        >Complaints</th
                      >
                      <th
                        class="text-right py-2 px-2 font-medium text-secondary"
                        >Top Issue</th
                      >
                      <th
                        class="text-right py-2 px-2 font-medium text-secondary"
                        >Return Rate</th
                      >
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-border">
                    <tr
                      class="hover:bg-surface-subtle cursor-pointer transition-colors"
                    >
                      <td class="py-3 px-2">
                        <div class="font-medium text-primary">Wrap Dress</div>
                        <div class="text-xs text-tertiary">
                          Women's • Apparel
                        </div>
                      </td>
                      <td
                        class="text-right py-3 px-2 font-semibold text-primary"
                        >187</td
                      >
                      <td class="text-right py-3 px-2 text-secondary"
                        >Neckline gapping (38%)</td
                      >
                      <td class="text-right py-3 px-2">
                        <span
                          class="px-2 py-1 text-xs font-medium bg-amber-500/10 text-amber-600 rounded"
                          >24%</span
                        >
                      </td>
                    </tr>
                    <tr
                      class="hover:bg-surface-subtle cursor-pointer transition-colors"
                    >
                      <td class="py-3 px-2">
                        <div class="font-medium text-primary">Classic Tee</div>
                        <div class="text-xs text-tertiary">Men's • Basic</div>
                      </td>
                      <td
                        class="text-right py-3 px-2 font-semibold text-primary"
                        >156</td
                      >
                      <td class="text-right py-3 px-2 text-secondary"
                        >Shrinkage (42%)</td
                      >
                      <td class="text-right py-3 px-2">
                        <span
                          class="px-2 py-1 text-xs font-medium bg-red-500/10 text-red-600 rounded"
                          >31%</span
                        >
                      </td>
                    </tr>
                    <tr
                      class="hover:bg-surface-subtle cursor-pointer transition-colors"
                    >
                      <td class="py-3 px-2">
                        <div class="font-medium text-primary">
                          Athletic Leggings
                        </div>
                        <div class="text-xs text-tertiary">
                          Women's • Activewear
                        </div>
                      </td>
                      <td
                        class="text-right py-3 px-2 font-semibold text-primary"
                        >143</td
                      >
                      <td class="text-right py-3 px-2 text-secondary"
                        >Seam quality (29%)</td
                      >
                      <td class="text-right py-3 px-2">
                        <span
                          class="px-2 py-1 text-xs font-medium bg-amber-500/10 text-amber-600 rounded"
                          >19%</span
                        >
                      </td>
                    </tr>
                    <tr
                      class="hover:bg-surface-subtle cursor-pointer transition-colors"
                    >
                      <td class="py-3 px-2">
                        <div class="font-medium text-primary">Gym Shirt</div>
                        <div class="text-xs text-tertiary">
                          Men's • Activewear
                        </div>
                      </td>
                      <td
                        class="text-right py-3 px-2 font-semibold text-primary"
                        >98</td
                      >
                      <td class="text-right py-3 px-2 text-secondary"
                        >Fit issues (35%)</td
                      >
                      <td class="text-right py-3 px-2">
                        <span
                          class="px-2 py-1 text-xs font-medium bg-accent-success/10 text-accent-success rounded"
                          >12%</span
                        >
                      </td>
                    </tr>
                    <tr
                      class="hover:bg-surface-subtle cursor-pointer transition-colors"
                    >
                      <td class="py-3 px-2">
                        <div class="font-medium text-primary">
                          Running Shorts
                        </div>
                        <div class="text-xs text-tertiary">
                          Unisex • Activewear
                        </div>
                      </td>
                      <td
                        class="text-right py-3 px-2 font-semibold text-primary"
                        >87</td
                      >
                      <td class="text-right py-3 px-2 text-secondary"
                        >Length concerns (41%)</td
                      >
                      <td class="text-right py-3 px-2">
                        <span
                          class="px-2 py-1 text-xs font-medium bg-accent-success/10 text-accent-success rounded"
                          >15%</span
                        >
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Issue Breakdown -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="bg-surface-base border border-border rounded-lg p-6">
                <h3 class="text-sm font-semibold text-primary mb-4">
                  Issues by Category
                </h3>
                <div class="space-y-3">
                  <div class="flex items-center justify-between">
                    <span class="text-sm text-primary">Fit & Sizing</span>
                    <span class="text-sm font-bold text-primary">342 (38%)</span
                    >
                  </div>
                  <div
                    class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                  >
                    <div
                      class="h-full bg-accent-primary rounded-full"
                      style="width: 38%"
                    >
                    </div>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-sm text-primary">Quality & Defects</span>
                    <span class="text-sm font-bold text-primary">287 (32%)</span
                    >
                  </div>
                  <div
                    class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                  >
                    <div
                      class="h-full bg-amber-500 rounded-full"
                      style="width: 32%"
                    >
                    </div>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-sm text-primary"
                      >Expectations Mismatch</span
                    >
                    <span class="text-sm font-bold text-primary">178 (20%)</span
                    >
                  </div>
                  <div
                    class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                  >
                    <div
                      class="h-full bg-blue-500 rounded-full"
                      style="width: 20%"
                    >
                    </div>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-sm text-primary">Other</span>
                    <span class="text-sm font-bold text-primary">89 (10%)</span>
                  </div>
                  <div
                    class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                  >
                    <div
                      class="h-full bg-secondary rounded-full"
                      style="width: 10%"
                    >
                    </div>
                  </div>
                </div>
              </div>

              <div class="bg-surface-base border border-border rounded-lg p-6">
                <h3 class="text-sm font-semibold text-primary mb-4">
                  Trending This Week
                </h3>
                <div class="space-y-3">
                  <div class="flex items-start gap-2">
                    <span class="text-xs font-bold text-accent-primary mt-0.5"
                      >↑</span
                    >
                    <div class="flex-1">
                      <div class="text-sm font-medium text-primary">
                        Shrinkage complaints
                      </div>
                      <div class="text-xs text-secondary">
                        +23% for Classic Tee
                      </div>
                    </div>
                  </div>
                  <div class="flex items-start gap-2">
                    <span class="text-xs font-bold text-accent-primary mt-0.5"
                      >↑</span
                    >
                    <div class="flex-1">
                      <div class="text-sm font-medium text-primary">
                        Seam quality issues
                      </div>
                      <div class="text-xs text-secondary">
                        +18% for Athletic Leggings
                      </div>
                    </div>
                  </div>
                  <div class="flex items-start gap-2">
                    <span class="text-xs font-bold text-accent-success mt-0.5"
                      >↓</span
                    >
                    <div class="flex-1">
                      <div class="text-sm font-medium text-primary">
                        Neckline gapping
                      </div>
                      <div class="text-xs text-secondary">
                        -12% for Wrap Dress (guidance working!)
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Impact View -->
          <div data-view-content="impact" class="view-content">
            <!-- Total Savings Summary -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
              <div
                class="stat-card bg-gradient-to-br from-accent-success/5 to-accent-success/10 border-2 border-accent-success/20 rounded-lg p-5"
              >
                <div class="text-sm text-secondary mb-1">Total Cost Saved</div>
                <div class="text-3xl font-bold text-primary">$31,247</div>
                <div class="text-xs text-accent-success mt-1">Last 30 days</div>
              </div>
              <div
                class="stat-card bg-surface-base border border-border rounded-lg p-5"
              >
                <div class="text-sm text-secondary mb-1">Returns Prevented</div>
                <div class="text-3xl font-bold text-primary">847</div>
                <div class="text-xs text-accent-success mt-1">
                  @ $27 avg cost/return
                </div>
              </div>
              <div
                class="stat-card bg-surface-base border border-border rounded-lg p-5"
              >
                <div class="text-sm text-secondary mb-1">ROI</div>
                <div class="text-3xl font-bold text-primary">4.2x</div>
                <div class="text-xs text-secondary mt-1">
                  Program cost: $7,450
                </div>
              </div>
            </div>

            <!-- Cost Savings Breakdown -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div class="bg-surface-base border border-border rounded-lg p-6">
                <h3 class="text-sm font-semibold text-primary mb-4">
                  Savings by Category
                </h3>
                <div class="space-y-4">
                  <div class="savings-item">
                    <div class="flex items-center justify-between mb-2">
                      <div>
                        <div class="text-sm font-medium text-primary">
                          Returns Prevented
                        </div>
                        <div class="text-xs text-secondary">
                          847 items @ $27 each
                        </div>
                      </div>
                      <span class="text-lg font-bold text-accent-success"
                        >$22,869</span
                      >
                    </div>
                    <div
                      class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                    >
                      <div
                        class="h-full bg-accent-success rounded-full"
                        style="width: 73%"
                      >
                      </div>
                    </div>
                  </div>
                  <div class="savings-item">
                    <div class="flex items-center justify-between mb-2">
                      <div>
                        <div class="text-sm font-medium text-primary">
                          At-Customer Disposal
                        </div>
                        <div class="text-xs text-secondary">
                          412 items @ $12 shipping saved
                        </div>
                      </div>
                      <span class="text-lg font-bold text-accent-success"
                        >$4,944</span
                      >
                    </div>
                    <div
                      class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                    >
                      <div
                        class="h-full bg-blue-500 rounded-full"
                        style="width: 16%"
                      >
                      </div>
                    </div>
                  </div>
                  <div class="savings-item">
                    <div class="flex items-center justify-between mb-2">
                      <div>
                        <div class="text-sm font-medium text-primary">
                          Inspection Cost Avoided
                        </div>
                        <div class="text-xs text-secondary">
                          630 items @ $5 per inspection
                        </div>
                      </div>
                      <span class="text-lg font-bold text-accent-success"
                        >$3,150</span
                      >
                    </div>
                    <div
                      class="h-2 bg-surface-elevated rounded-full overflow-hidden"
                    >
                      <div
                        class="h-full bg-amber-500 rounded-full"
                        style="width: 10%"
                      >
                      </div>
                    </div>
                  </div>
                  <div class="savings-item pt-3 border-t border-border">
                    <div class="flex items-center justify-between">
                      <div class="text-sm font-semibold text-secondary">
                        Program Cost
                      </div>
                      <span class="text-lg font-bold text-secondary"
                        >-$7,450</span
                      >
                    </div>
                  </div>
                  <div class="savings-item pt-2">
                    <div class="flex items-center justify-between">
                      <div class="text-base font-bold text-primary">
                        Net Savings
                      </div>
                      <span class="text-2xl font-bold text-accent-success"
                        >$23,513</span
                      >
                    </div>
                  </div>
                </div>
              </div>

              <div class="bg-surface-base border border-border rounded-lg p-6">
                <h3 class="text-sm font-semibold text-primary mb-4">
                  Prevention Breakdown
                </h3>
                <div class="space-y-3">
                  <div
                    class="prevention-item p-3 bg-surface-subtle rounded-lg hover:bg-surface-elevated cursor-pointer transition-colors"
                  >
                    <div class="flex items-center justify-between mb-1">
                      <span class="text-sm font-medium text-primary"
                        >Fit Advice Resolved</span
                      >
                      <span class="text-sm font-bold text-primary">412</span>
                    </div>
                    <div class="text-xs text-secondary">
                      Sizing guidance, styling tips
                    </div>
                    <div class="mt-2 text-xs text-accent-success">
                      Saved: $11,124
                    </div>
                  </div>
                  <div
                    class="prevention-item p-3 bg-surface-subtle rounded-lg hover:bg-surface-elevated cursor-pointer transition-colors"
                  >
                    <div class="flex items-center justify-between mb-1">
                      <span class="text-sm font-medium text-primary"
                        >Usage Guidance</span
                      >
                      <span class="text-sm font-bold text-primary">278</span>
                    </div>
                    <div class="text-xs text-secondary">
                      Care instructions, troubleshooting
                    </div>
                    <div class="mt-2 text-xs text-accent-success">
                      Saved: $7,506
                    </div>
                  </div>
                  <div
                    class="prevention-item p-3 bg-surface-subtle rounded-lg hover:bg-surface-elevated cursor-pointer transition-colors"
                  >
                    <div class="flex items-center justify-between mb-1">
                      <span class="text-sm font-medium text-primary"
                        >Photo Confirmed OK</span
                      >
                      <span class="text-sm font-bold text-primary">157</span>
                    </div>
                    <div class="text-xs text-secondary">
                      Customer concern, no actual defect
                    </div>
                    <div class="mt-2 text-xs text-accent-success">
                      Saved: $4,239
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ROI Comparison -->
            <div
              class="bg-gradient-to-br from-accent-primary/5 to-accent-primary/10 border border-accent-primary/20 rounded-lg p-6"
            >
              <div class="flex items-start justify-between gap-4">
                <div>
                  <h3 class="text-base font-semibold text-primary mb-2">
                    30-Day Program Performance
                  </h3>
                  <div class="space-y-2">
                    <div class="flex items-center gap-2">
                      <span class="text-sm text-secondary">Total Savings:</span>
                      <span class="text-lg font-bold text-accent-success"
                        >$31,247</span
                      >
                    </div>
                    <div class="flex items-center gap-2">
                      <span class="text-sm text-secondary">Program Cost:</span>
                      <span class="text-lg font-bold text-primary">$7,450</span>
                    </div>
                    <div
                      class="flex items-center gap-2 pt-2 border-t border-accent-primary/20"
                    >
                      <span class="text-sm font-semibold text-primary"
                        >Net Impact:</span
                      >
                      <span class="text-2xl font-bold text-accent-success"
                        >$23,513</span
                      >
                    </div>
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-sm text-secondary mb-1">ROI</div>
                  <div class="text-4xl font-bold text-accent-primary">4.2x</div>
                  <div class="text-xs text-secondary mt-1">
                    Return on investment
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Configuration View -->
          <div data-view-content="configuration" class="view-content">
            <!-- Brand Voice Settings -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
              <div class="bg-surface-base border border-border rounded-lg p-6">
                <h3 class="text-sm font-semibold text-primary mb-4">
                  Brand Voice
                </h3>
                <div class="space-y-4">
                  <div class="setting-group">
                    <label class="text-sm font-medium text-primary mb-2 block"
                      >Tone</label
                    >
                    <select
                      class="w-full px-3 py-2 text-sm border border-border rounded bg-surface-base text-primary"
                    >
                      <option>Friendly & Helpful</option>
                      <option>Professional</option>
                      <option>Casual & Conversational</option>
                      <option>Empathetic</option>
                    </select>
                  </div>
                  <div class="setting-group">
                    <label class="text-sm font-medium text-primary mb-2 block"
                      >Formality Level</label
                    >
                    <div class="flex items-center gap-2">
                      <input
                        type="range"
                        min="1"
                        max="5"
                        value="3"
                        class="flex-1"
                      />
                      <span class="text-xs text-secondary">Balanced</span>
                    </div>
                  </div>
                  <div class="setting-group">
                    <label class="text-sm font-medium text-primary mb-2 block"
                      >Brand Personality</label
                    >
                    <div class="flex flex-wrap gap-2">
                      <span
                        class="px-2 py-1 text-xs bg-accent-primary/10 text-accent-primary rounded"
                        >Helpful</span
                      >
                      <span
                        class="px-2 py-1 text-xs bg-accent-primary/10 text-accent-primary rounded"
                        >Proactive</span
                      >
                      <span
                        class="px-2 py-1 text-xs bg-surface-elevated text-secondary rounded"
                        >Casual</span
                      >
                      <span
                        class="px-2 py-1 text-xs bg-surface-elevated text-secondary rounded"
                        >Formal</span
                      >
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="bg-surface-subtle border border-border rounded-lg p-6"
              >
                <h3 class="text-sm font-semibold text-primary mb-4">
                  Live Preview
                </h3>
                <div class="space-y-3">
                  <div class="text-xs text-tertiary mb-3">
                    Example check-in message:
                  </div>
                  <div
                    class="bg-surface-base border border-border rounded-lg p-4"
                  >
                    <p class="text-sm text-primary leading-relaxed">
                      "Hi [Name]! Quick check-in—how's the new [Product] fitting
                      so far?"
                    </p>
                  </div>
                  <div class="text-xs text-tertiary mb-2 mt-4">
                    Example follow-up:
                  </div>
                  <div
                    class="bg-surface-base border border-border rounded-lg p-4"
                  >
                    <p class="text-sm text-primary leading-relaxed">
                      "That's a common [product-type] thing. Try [solution]. If
                      it still [issue], [alternative]."
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Response Policies -->
            <div
              class="bg-surface-base border border-border rounded-lg p-6 mb-6"
            >
              <h3 class="text-sm font-semibold text-primary mb-4">
                Response Policies
              </h3>
              <div class="space-y-4">
                <div class="policy-item p-4 bg-surface-subtle rounded-lg">
                  <div class="flex items-start justify-between mb-2">
                    <div>
                      <div class="text-sm font-medium text-primary">
                        Escalation Trigger
                      </div>
                      <div class="text-xs text-secondary mt-1">
                        Hand off to human support when:
                      </div>
                    </div>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input type="checkbox" checked class="sr-only peer" />
                      <div
                        class="w-9 h-5 bg-surface-elevated peer-checked:bg-accent-primary rounded-full peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                      >
                      </div>
                    </label>
                  </div>
                  <ul class="text-xs text-secondary space-y-1 ml-4">
                    <li>• Customer requests human agent</li>
                    <li>• 3+ unresolved back-and-forth exchanges</li>
                    <li>• Sentiment analysis indicates frustration</li>
                  </ul>
                </div>

                <div class="policy-item p-4 bg-surface-subtle rounded-lg">
                  <div class="flex items-start justify-between mb-2">
                    <div>
                      <div class="text-sm font-medium text-primary">
                        At-Customer Disposal
                      </div>
                      <div class="text-xs text-secondary mt-1">
                        Recommend disposal when:
                      </div>
                    </div>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input type="checkbox" checked class="sr-only peer" />
                      <div
                        class="w-9 h-5 bg-surface-elevated peer-checked:bg-accent-primary rounded-full peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                      >
                      </div>
                    </label>
                  </div>
                  <ul class="text-xs text-secondary space-y-1 ml-4">
                    <li>• Item value &lt; $25</li>
                    <li>• Severe damage confirmed by photo</li>
                    <li>• Reverse logistics cost &gt; 40% of item value</li>
                  </ul>
                </div>

                <div class="policy-item p-4 bg-surface-subtle rounded-lg">
                  <div class="flex items-start justify-between mb-2">
                    <div>
                      <div class="text-sm font-medium text-primary">
                        Auto-Exchange Offer
                      </div>
                      <div class="text-xs text-secondary mt-1">
                        Automatically offer exchange for:
                      </div>
                    </div>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                    >
                      <input type="checkbox" checked class="sr-only peer" />
                      <div
                        class="w-9 h-5 bg-surface-elevated peer-checked:bg-accent-primary rounded-full peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all"
                      >
                      </div>
                    </label>
                  </div>
                  <ul class="text-xs text-secondary space-y-1 ml-4">
                    <li>• Size/fit issues</li>
                    <li>• Manufacturing defects</li>
                    <li>• Wrong item shipped</li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Response Templates -->
            <div class="bg-surface-base border border-border rounded-lg p-6">
              <h3 class="text-sm font-semibold text-primary mb-4">
                Response Templates
              </h3>
              <div class="space-y-3">
                <div
                  class="template-item p-3 border border-border rounded hover:border-accent-primary/50 cursor-pointer transition-colors"
                >
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium text-primary"
                      >Initial Check-in</span
                    >
                    <button class="text-xs text-accent-primary hover:underline"
                      >Edit</button
                    >
                  </div>
                  <p class="text-xs text-secondary italic">
                    "Hi [Name]! Quick check-in—how's the new [Product] fitting
                    so far?"
                  </p>
                </div>
                <div
                  class="template-item p-3 border border-border rounded hover:border-accent-primary/50 cursor-pointer transition-colors"
                >
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium text-primary"
                      >Photo Request</span
                    >
                    <button class="text-xs text-accent-primary hover:underline"
                      >Edit</button
                    >
                  </div>
                  <p class="text-xs text-secondary italic">
                    "Can you snap a quick photo of [issue area] so I can confirm
                    and fix this right away?"
                  </p>
                </div>
                <div
                  class="template-item p-3 border border-border rounded hover:border-accent-primary/50 cursor-pointer transition-colors"
                >
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium text-primary"
                      >Resolution Confirmation</span
                    >
                    <button class="text-xs text-accent-primary hover:underline"
                      >Edit</button
                    >
                  </div>
                  <p class="text-xs text-secondary italic">
                    "Done. You'll see [action] confirmation shortly. [Closing]"
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Mobile Navigation Drawer -->
        <div
          class="mobile-nav-overlay sm:hidden fixed inset-0 bg-black/50 z-50 opacity-0 pointer-events-none transition-opacity duration-300"
        >
          <div
            class="mobile-nav-drawer absolute left-0 top-0 bottom-0 w-64 bg-surface-dark transform -translate-x-full transition-transform duration-300"
          >
            <!-- Mobile Nav Header -->
            <div
              class="px-4 py-5 border-b border-border/20 flex items-center justify-between"
            >
              <div class="flex items-center gap-2">
                <div
                  class="w-7 h-7 rounded bg-accent-primary flex items-center justify-center"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-4 w-4 text-inverse"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                    ></path>
                  </svg>
                </div>
                <span class="text-sm font-semibold text-inverse"
                  >Return Signals</span
                >
              </div>
              <button
                class="mobile-nav-close p-1 text-inverse/60 hover:text-inverse"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>

            <!-- Mobile Hint (at top) -->
            <div class="px-4 py-3 border-b border-border/20">
              <p class="text-xs text-inverse/40 italic text-center">
                Tap any section to explore
              </p>
            </div>

            <!-- Mobile Navigation Menu (same items as desktop) -->
            <nav class="mobile-nav-menu px-3 py-4 space-y-1">
              <button
                data-view="overview"
                class="nav-item mobile-nav-item active flex items-center gap-3 px-3 py-2 rounded text-sm font-medium text-inverse bg-accent-primary/10 w-full text-left"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                  ></path>
                </svg>
                Overview
              </button>
              <button
                data-view="interventions"
                class="nav-item mobile-nav-item flex items-center gap-3 px-3 py-2 rounded text-sm text-inverse/60 hover:text-inverse hover:bg-accent-primary/5 w-full text-left"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"
                  ></path>
                </svg>
                Interventions
              </button>
              <button
                data-view="products"
                class="nav-item mobile-nav-item flex items-center gap-3 px-3 py-2 rounded text-sm text-inverse/60 hover:text-inverse hover:bg-accent-primary/5 w-full text-left"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"
                  ></path>
                </svg>
                Products
              </button>
              <button
                data-view="impact"
                class="nav-item mobile-nav-item flex items-center gap-3 px-3 py-2 rounded text-sm text-inverse/60 hover:text-inverse hover:bg-accent-primary/5 w-full text-left"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                  ></path>
                </svg>
                Impact
              </button>
              <button
                data-view="configuration"
                class="nav-item mobile-nav-item flex items-center gap-3 px-3 py-2 rounded text-sm text-inverse/60 hover:text-inverse hover:bg-accent-primary/5 w-full text-left"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
                Configuration
              </button>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .analytics-platform-preview {
    position: relative;
  }

  .app-layout {
    height: 650px;
  }

  .main-content {
    max-height: 650px;
  }

  .sidebar {
    background: linear-gradient(
      180deg,
      rgb(15, 23, 42) 0%,
      rgb(30, 41, 59) 100%
    );
  }

  .nav-item {
    cursor: pointer;
    user-select: none;
    transition: all 150ms ease-out;
  }

  .nav-item.active {
    background: rgba(255, 255, 255, 0.1);
    color: white;
  }

  .nav-item:not(.active):hover {
    color: white;
    background: rgba(255, 255, 255, 0.05);
  }

  .filter-btn {
    cursor: default;
    user-select: none;
  }

  .views-container {
    position: relative;
    background: linear-gradient(
      to bottom,
      rgb(248, 250, 252) 0%,
      rgb(255, 255, 255) 100%
    );
    overflow-y: auto;
    max-height: calc(650px - 60px); /* Subtract top bar height */
  }

  /* Custom scrollbar styling */
  .views-container::-webkit-scrollbar {
    width: 8px;
  }

  .views-container::-webkit-scrollbar-track {
    background: rgb(241, 245, 249);
  }

  .views-container::-webkit-scrollbar-thumb {
    background: rgb(203, 213, 225);
    border-radius: 4px;
  }

  .views-container::-webkit-scrollbar-thumb:hover {
    background: rgb(148, 163, 184);
  }

  .view-content {
    display: none;
    opacity: 0;
    animation: fadeIn 300ms ease-out forwards;
  }

  .view-content.active {
    display: block;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .kpi-card {
    transition: all 200ms ease-out;
    cursor: pointer;
  }

  .kpi-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  /* Typing cursor effect for Products view */
  .nl-query-input.typing {
    position: relative;
  }

  .nl-query-input.typing::after {
    content: "|";
    animation: blink 1s step-end infinite;
    margin-left: 2px;
    color: rgb(15, 23, 42);
  }

  @keyframes blink {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
  }

  /* Mobile Navigation Drawer */
  .mobile-nav-overlay.active {
    opacity: 1;
    pointer-events: auto;
  }

  .mobile-nav-overlay.active .mobile-nav-drawer {
    transform: translateX(0);
  }

  .mobile-nav-drawer {
    box-shadow: 2px 0 12px rgba(0, 0, 0, 0.3);
    background: linear-gradient(
      180deg,
      rgb(15, 23, 42) 0%,
      rgb(30, 41, 59) 100%
    );
  }

  @media (max-width: 640px) {
    .app-layout {
      height: 550px;
    }

    .main-content {
      max-height: 550px;
    }

    .views-container {
      max-height: calc(550px - 60px);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .progress-dot,
    .nav-item {
      transition: none !important;
    }
  }
</style>

<script>
  // Simple view switching for the new analytics platform

  document.addEventListener("DOMContentLoaded", () => {
    const containers = Array.from(
      document.querySelectorAll(".analytics-platform-preview"),
    );

    // Track which views have been animated
    const animatedViews = new WeakMap<HTMLElement, Set<string>>();

    // View titles for top bar
    const viewTitles = {
      overview: {
        title: "Overview",
        subtitle: "Prevention • Intervention • Insights",
      },
      interventions: {
        title: "Interventions",
        subtitle: "Check-ins • Resolutions • Outcomes",
      },
      products: {
        title: "Products",
        subtitle: "SKU-level Intelligence • Trends",
      },
      impact: { title: "Impact", subtitle: "Cost Savings • ROI • Metrics" },
      configuration: {
        title: "Configuration",
        subtitle: "Brand Voice • Policies • Settings",
      },
    };

    // Typing effect utility
    async function typeText(
      input: HTMLInputElement,
      text: string,
      delay: number = 50,
    ) {
      return new Promise<void>((resolve) => {
        let i = 0;
        const interval = setInterval(() => {
          input.value = text.slice(0, i + 1);
          i++;
          if (i > text.length) {
            clearInterval(interval);
            resolve();
          }
        }, delay);
      });
    }

    // Wait utility
    function wait(ms: number) {
      return new Promise((resolve) => setTimeout(resolve, ms));
    }

    // Animate Products view NL query
    async function animateProductsView(container: HTMLElement) {
      const productsView = container.querySelector(
        "[data-view-content='products']",
      ) as HTMLElement;
      if (!productsView) return;

      // Check if already animated
      const animated = animatedViews.get(container) || new Set();
      if (animated.has("products")) return;
      animated.add("products");
      animatedViews.set(container, animated);

      await wait(300);

      // Type the question
      const input = productsView.querySelector(
        ".nl-query-input",
      ) as HTMLInputElement;
      if (input) {
        const query = input.getAttribute("data-full-query") || "";
        input.classList.add("typing");
        await typeText(input, query, 50);
        input.classList.remove("typing");
      }

      await wait(400);

      // Show answer container
      const answerContainer = productsView.querySelector(
        ".nl-answer-container",
      ) as HTMLElement;
      if (answerContainer) {
        answerContainer.style.opacity = "1";
        answerContainer.style.maxHeight = "500px";
      }

      await wait(300);

      // Stagger reveal answer items
      const answerItems = Array.from(
        productsView.querySelectorAll(".answer-item"),
      ) as HTMLElement[];
      for (const item of answerItems) {
        item.style.opacity = "1";
        item.style.transform = "translateX(0)";
        await wait(150);
      }

      // Add click handlers to answer items for drill-down
      const clickableAnswers = Array.from(
        productsView.querySelectorAll(".clickable-answer"),
      ) as HTMLElement[];
      const drilldownContainer = productsView.querySelector(
        ".conversations-drilldown",
      ) as HTMLElement;
      const closeButton = productsView.querySelector(
        ".close-drilldown",
      ) as HTMLElement;

      clickableAnswers.forEach((answer) => {
        answer.addEventListener("click", () => {
          if (drilldownContainer) {
            drilldownContainer.style.opacity = "1";
            drilldownContainer.style.maxHeight = "600px";

            // Scroll to show the drill-down
            setTimeout(() => {
              drilldownContainer.scrollIntoView({
                behavior: "smooth",
                block: "nearest",
              });
            }, 100);
          }
        });
      });

      // Close button handler
      if (closeButton) {
        closeButton.addEventListener("click", () => {
          if (drilldownContainer) {
            drilldownContainer.style.opacity = "0";
            drilldownContainer.style.maxHeight = "0";
          }
        });
      }
    }

    // Function to switch views
    async function switchView(container: HTMLElement, viewName: string) {
      // Update nav active states
      const navItems = Array.from(
        container.querySelectorAll(".nav-item"),
      ) as HTMLElement[];
      navItems.forEach((item) => {
        const itemView = item.getAttribute("data-view");
        if (itemView === viewName) {
          item.classList.add("active", "font-medium", "bg-accent-primary/10");
          item.classList.remove("text-inverse/60");
        } else {
          item.classList.remove(
            "active",
            "font-medium",
            "bg-accent-primary/10",
          );
          item.classList.add("text-inverse/60");
        }
      });

      // Update view content
      const viewContents = Array.from(
        container.querySelectorAll(".view-content"),
      ) as HTMLElement[];
      viewContents.forEach((content) => {
        const contentView = content.getAttribute("data-view-content");
        if (contentView === viewName) {
          content.classList.add("active");
        } else {
          content.classList.remove("active");
        }
      });

      // Update top bar title
      const viewTitle = container.querySelector(".view-title") as HTMLElement;
      const viewSubtitle = container.querySelector(
        ".view-subtitle",
      ) as HTMLElement;
      if (viewTitle && viewTitles[viewName as keyof typeof viewTitles]) {
        viewTitle.textContent =
          viewTitles[viewName as keyof typeof viewTitles].title;
      }
      if (viewSubtitle && viewTitles[viewName as keyof typeof viewTitles]) {
        viewSubtitle.textContent =
          viewTitles[viewName as keyof typeof viewTitles].subtitle;
      }

      // Trigger view-specific animations
      if (viewName === "products") {
        animateProductsView(container);
      }
    }

    // Initialize navigation for each container
    containers.forEach((containerEl) => {
      const container = containerEl as HTMLElement;

      // Add click handlers to nav items (both desktop and mobile)
      const navItems = Array.from(
        container.querySelectorAll(".nav-item[data-view]"),
      ) as HTMLElement[];

      navItems.forEach((navItem) => {
        navItem.addEventListener("click", () => {
          const viewName = navItem.getAttribute("data-view");
          if (viewName) {
            switchView(container, viewName);

            // Close mobile menu if open
            const mobileOverlay = container.querySelector(
              ".mobile-nav-overlay",
            ) as HTMLElement;
            if (mobileOverlay) {
              mobileOverlay.classList.remove("active");
            }
          }
        });
      });

      // Mobile menu toggle handlers
      const mobileMenuButton = container.querySelector(
        ".mobile-menu-button",
      ) as HTMLElement;
      const mobileOverlay = container.querySelector(
        ".mobile-nav-overlay",
      ) as HTMLElement;
      const mobileNavClose = container.querySelector(
        ".mobile-nav-close",
      ) as HTMLElement;

      if (mobileMenuButton && mobileOverlay) {
        mobileMenuButton.addEventListener("click", () => {
          mobileOverlay.classList.add("active");
        });
      }

      if (mobileNavClose && mobileOverlay) {
        mobileNavClose.addEventListener("click", () => {
          mobileOverlay.classList.remove("active");
        });
      }

      // Close mobile menu when clicking overlay background
      if (mobileOverlay) {
        mobileOverlay.addEventListener("click", (e) => {
          if (e.target === mobileOverlay) {
            mobileOverlay.classList.remove("active");
          }
        });
      }

      // Set initial view (overview)
      switchView(container, "overview");
    });
  });
</script>
