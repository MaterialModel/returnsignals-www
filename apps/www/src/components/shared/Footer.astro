---
const year = new Date().getFullYear()

// Generate markdown version URL for current page
const pathname = Astro.url.pathname
const cleanPath = pathname.replace(/\.html$/, '').replace(/\/$/, '')
const mdPath = cleanPath === '' ? '/index.md' : `${cleanPath}.md`

const socialLinks = [
  {
    name: 'LinkedIn',
    href: 'https://www.linkedin.com/company/material-model/',
    icon: '/icons/footer/linkedin.svg',
  },
  {
    name: 'X',
    href: 'https://x.com/MaterialModelAI',
    icon: '/icons/footer/x.svg',
  },
  {
    name: 'YouTube',
    href: 'https://www.youtube.com/@MaterialModel',
    icon: '/icons/footer/youtube.svg',
  },
  {
    name: 'Discord',
    href: 'https://discord.gg/vA8weUwPzP',
    icon: '/icons/footer/discord.svg',
  },
]
---

<footer class="mt-auto bg-surface-base">
  <!-- Divider with birds -->
  <div class="relative">
    <hr class="border-t border" />
    <div class="container-narrow relative">
      <span
        role="img"
        aria-label="Birds"
        class="absolute -bottom-[8px] right-[100px] h-10 w-20 block bg-secondary"
        style="mask-image: url('/icons/birds/standing-birds.svg'); mask-size: contain; mask-repeat: no-repeat; mask-position: center; -webkit-mask-image: url('/icons/birds/standing-birds.svg'); -webkit-mask-size: contain; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center;"
      ></span>
    </div>
  </div>

  <div class="container-narrow py-6">
    <!-- Mobile: stacked layout -->
    <div class="flex flex-col gap-4 md:hidden">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2">
          <span class="text-xs text-secondary">Backed by</span>
          <img src="/images/ycombinator.png" alt="Y Combinator" class="h-4" />
        </div>
        <div class="flex items-center gap-3">
          {
            socialLinks.map((link) => (
              <a
                href={link.href}
                target="_blank"
                rel="noopener noreferrer"
                aria-label={link.name}
                class="transition-colors hover:text-primary"
              >
                <span
                  class="block h-4 w-4 bg-secondary hover:bg-primary transition-colors"
                  style={`mask-image: url('${link.icon}'); mask-size: contain; mask-repeat: no-repeat; mask-position: center; -webkit-mask-image: url('${link.icon}'); -webkit-mask-size: contain; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center;`}
                />
              </a>
            ))
          }
        </div>
      </div>
      <div class="flex flex-wrap items-center gap-x-4 gap-y-2 text-xs text-secondary">
        <span>&copy; {year} Return Signals</span>
        <a href="/privacy" class="hover:text-primary transition-colors">Privacy</a>
        <a href="/terms" class="hover:text-primary transition-colors">Terms</a>
        <a href="mailto:hello@returnsignals.com" class="hover:text-primary transition-colors"
          >Contact</a
        >
        <a href={mdPath} class="hover:text-primary transition-colors">Markdown</a>
      </div>
    </div>

    <!-- Desktop: single row -->
    <div class="hidden md:flex items-center justify-between">
      <!-- Left: copyright & legal -->
      <div class="flex items-center gap-4 text-xs text-secondary">
        <span>&copy; {year} Return Signals</span>
        <span class="text-border">|</span>
        <a href="/privacy" class="hover:text-primary transition-colors">Privacy</a>
        <a href="/terms" class="hover:text-primary transition-colors">Terms</a>
        <a href="mailto:hello@returnsignals.com" class="hover:text-primary transition-colors"
          >Contact</a
        >
        <a href={mdPath} class="hover:text-primary transition-colors">Markdown</a>
      </div>

      <!-- Center: social -->
      <div class="flex items-center gap-4">
        {
          socialLinks.map((link) => (
            <a href={link.href} target="_blank" rel="noopener noreferrer" aria-label={link.name}>
              <span
                class="block h-4 w-4 bg-secondary hover:bg-primary transition-colors"
                style={`mask-image: url('${link.icon}'); mask-size: contain; mask-repeat: no-repeat; mask-position: center; -webkit-mask-image: url('${link.icon}'); -webkit-mask-size: contain; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center;`}
              />
            </a>
          ))
        }
      </div>

      <!-- Right: YC badge -->
      <div class="flex items-center gap-2">
        <span class="text-xs text-secondary">Backed by</span>
        <img src="/images/ycombinator.png" alt="Y Combinator" class="h-4" />
      </div>
    </div>
  </div>
</footer>
