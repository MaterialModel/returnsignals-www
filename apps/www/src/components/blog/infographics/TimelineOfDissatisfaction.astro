---
/**
 * Timeline of Dissatisfaction Infographic
 * Shows the customer journey from delivery to return decision,
 * highlighting the leverage zone where proactive engagement can help.
 */
---

<figure class="infographic-timeline">
  <div class="timeline-container">
    <!-- Timeline Track -->
    <div class="timeline-track">
      <div class="timeline-line"></div>

      <!-- Leverage Zone Highlight (background) -->
      <div class="leverage-zone-highlight">
        <div class="leverage-zone-label">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z"
            ></path>
          </svg>
          <span>Leverage Zone</span>
        </div>
      </div>

      <!-- Timeline Steps -->
      <div class="timeline-steps">
        <div class="step" data-step="1">
          <div class="step-marker">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"
              ></path>
            </svg>
          </div>
          <div class="step-label">Delivered</div>
        </div>

        <div class="step in-leverage-zone" data-step="2">
          <div class="step-marker highlighted">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"
              ></path>
            </svg>
          </div>
          <div class="step-label">First Try-On</div>
        </div>

        <div class="step in-leverage-zone" data-step="3">
          <div class="step-marker highlighted">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"
              ></path>
            </svg>
          </div>
          <div class="step-label">Doubt Forms</div>
        </div>

        <div class="step" data-step="4">
          <div class="step-marker negative">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"></path>
            </svg>
          </div>
          <div class="step-label">Return Decision</div>
        </div>

        <div class="step" data-step="5">
          <div class="step-marker negative">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25z"
              ></path>
            </svg>
          </div>
          <div class="step-label">Ticket Filed</div>
        </div>
      </div>
    </div>

    <!-- What Happens in Leverage Zone -->
    <div class="leverage-comparison">
      <div class="comparison-header">
        <span class="eyebrow">What happens in the leverage zone?</span>
      </div>

      <div class="comparison-grid">
        <!-- Without Return Signals Card -->
        <div class="comparison-card negative">
          <div class="card-title negative">Without Proactive Outreach</div>
          <div class="card-content">
            <ul class="card-list negative">
              <li>No touchpoint</li>
              <li>Doubt festers</li>
              <li>Decision hardens</li>
            </ul>
            <div class="card-outcome negative">
              Refund issued, customer lost
            </div>
          </div>
        </div>

        <!-- With Return Signals Card -->
        <div class="comparison-card positive">
          <div class="card-title positive">With Return Signals</div>
          <div class="card-content">
            <ul class="card-list positive">
              <li>Check-in text</li>
              <li>Concern shared</li>
              <li>Personalized help</li>
            </ul>
            <div class="card-outcome positive">
              Exchange made, customer loyalty won
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <figcaption class="infographic-caption">
    The same customer, the same uncertainty, but two completely different
    experiences.
  </figcaption>
</figure>

<style>
  .infographic-timeline {
    margin: 2.5rem 0;
    padding: 0;
  }

  .timeline-container {
    background: linear-gradient(
      135deg,
      theme("colors.surface.elevated") 0%,
      theme("colors.surface.subtle") 100%
    );
    border: 1px solid theme("colors.border.DEFAULT");
    border-radius: 0.75rem;
    padding: 2rem 1.5rem 1.5rem;
    position: relative;
    overflow: hidden;
  }

  .timeline-track {
    position: relative;
    padding-top: 1.5rem;
  }

  .timeline-line {
    position: absolute;
    top: 2.75rem;
    left: 10%;
    right: 10%;
    height: 3px;
    background: theme("colors.border.DEFAULT");
    border-radius: 2px;
  }

  /* Leverage Zone Highlight - positioned behind steps 2 and 3 */
  .leverage-zone-highlight {
    position: absolute;
    top: -0.25rem;
    left: 18%;
    width: 40%;
    bottom: -0.25rem;
    background: theme("colors.accent.success-bg");
    border: 1px solid theme("colors.accent.success-border");
    border-radius: 0.75rem;
    z-index: 0;
  }

  .leverage-zone-label {
    position: absolute;
    top: 0.375rem;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.625rem;
    font-weight: 600;
    color: theme("colors.accent.success-text");
    text-transform: uppercase;
    letter-spacing: 0.03em;
    white-space: nowrap;
  }

  .leverage-zone-label svg {
    width: 0.75rem;
    height: 0.75rem;
    color: theme("colors.accent.success-text");
    pointer-events: none;
    user-select: none;
  }

  .timeline-steps {
    display: flex;
    justify-content: space-between;
    position: relative;
    z-index: 1;
  }

  .step {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 18%;
    text-align: center;
  }

  .step-marker {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    background: theme("colors.surface.base");
    border: 2px solid theme("colors.border.DEFAULT");
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
  }

  .step-marker svg {
    width: 1.25rem;
    height: 1.25rem;
    color: theme("colors.caption");
    pointer-events: none;
    user-select: none;
  }

  .step-marker.highlighted {
    background: theme("colors.accent.success-bg");
    border-color: theme("colors.accent.success-border");
    border-width: 2px;
  }

  .step-marker.highlighted svg {
    color: theme("colors.accent.success-text");
  }

  .step-marker.negative {
    background: theme("colors.accent.error-bg");
    border-color: theme("colors.accent.error-border");
  }

  .step-marker.negative svg {
    color: theme("colors.accent.error-text");
  }

  .step-label {
    font-size: 0.8125rem;
    font-weight: 600;
    color: theme("colors.primary");
    margin-bottom: 0.25rem;
    line-height: 1.3;
    max-width: 5rem;
  }

  .step.in-leverage-zone .step-label {
    color: theme("colors.accent.success-text");
  }

  .step:has(.step-marker.negative) .step-label {
    color: theme("colors.accent.error-text");
  }

  /* Leverage Comparison Section */
  .leverage-comparison {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid theme("colors.border.DEFAULT");
  }

  .comparison-header {
    text-align: center;
    margin-bottom: 1rem;
  }

  .comparison-header .eyebrow {
    color: theme("colors.secondary");
  }

  .comparison-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }

  /* Card layout for each scenario */
  .comparison-card {
    display: flex;
    flex-direction: column;
    gap: 0.875rem;
    background: theme("colors.surface.base");
    border: 1px solid theme("colors.border.DEFAULT");
    border-radius: 0.75rem;
    padding: 1rem;
    align-items: stretch; /* allow full-width header */
  }

  .comparison-card.negative {
    border-color: theme("colors.accent.error-border");
  }
  .comparison-card.positive {
    border-color: theme("colors.accent.success-border");
  }

  .card-title {
    font-size: 0.875rem; /* slightly larger for emphasis */
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    text-align: center;
    display: block;
    margin: -1rem -1rem 0.75rem; /* extend into card padding */
    padding: 0.75rem 1rem;
    border-top-left-radius: 0.75rem;
    border-top-right-radius: 0.75rem;
    border-bottom: 1px solid transparent; /* color set by variant */
  }

  .card-title.negative {
    color: theme("colors.accent.error-text");
    background: theme("colors.accent.error-bg");
    border-bottom-color: theme("colors.accent.error-border");
  }
  .card-title.positive {
    color: theme("colors.accent.success-text");
    background: theme("colors.accent.success-bg");
    border-bottom-color: theme("colors.accent.success-border");
  }

  .card-content {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
  }

  .card-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .card-list li {
    display: inline-flex;
    align-items: center;
    line-height: 1;
    font-size: 0.8125rem;
    font-weight: 600;
  }

  /* Insert centered arrows between items, inheriting current color */
  .card-list li + li::before {
    content: "â†’";
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin: 0 0.5rem;
    font-weight: 400;
    line-height: 1;
  }

  .card-list.negative li {
    color: theme("colors.accent.error-text");
  }
  .card-list.positive li {
    color: theme("colors.accent.success-text");
  }

  .card-outcome {
    margin-top: 0.75rem;
    padding-top: 0.75rem;
    border-top: 1px solid theme("colors.border.DEFAULT"); /* separate list from outcome */
    text-align: center;
    font-size: 0.875rem;
    font-weight: 600;
  }

  .card-outcome.negative {
    color: theme("colors.accent.error-text");
  }
  .card-outcome.positive {
    color: theme("colors.accent.success-text");
  }

  /* Center columns and their contents for uniform vertical alignment */
  .comparison-grid {
    align-items: center;
  }
  .comparison-column {
    align-items: center;
  }

  .column-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.375rem;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.5rem 0.875rem;
    border-radius: 9999px;
    align-self: center;
  }

  .column-badge svg {
    width: 0.625rem;
    height: 0.625rem;
    pointer-events: none;
  }

  .column-badge.negative {
    background: theme("colors.accent.error-bg");
    color: theme("colors.accent.error-text");
    border: 1px solid theme("colors.accent.error-border");
  }

  .column-badge.positive {
    background: theme("colors.accent.success-bg");
    color: theme("colors.accent.success-text");
    border: 1px solid theme("colors.accent.success-border");
  }

  .flow-sequence {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    background: theme("colors.surface.base");
    border: 1px solid theme("colors.border.DEFAULT");
    border-radius: 0.625rem;
    padding: 1.25rem 1rem;
  }

  .flow-item {
    flex: 1;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .flow-text {
    font-size: 0.8125rem;
    font-weight: 600;
    line-height: 1; /* unify with arrow for true centering */
    display: inline-flex;
    align-items: center;
  }

  .flow-text.negative {
    color: theme("colors.accent.error-text");
  }

  .flow-text.positive {
    color: theme("colors.accent.success-text");
  }

  .flow-connector {
    font-size: 0.8125rem; /* match text size */
    font-weight: 300;
    flex-shrink: 0;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1; /* exact vertical centering */
    min-width: 1.3em; /* consistent spacing footprint for arrows */
  }

  .flow-connector.negative {
    color: theme("colors.accent.error-text");
  }

  .flow-connector.positive {
    color: theme("colors.accent.success-text");
  }

  .column-result {
    border-radius: 0.625rem;
    padding: 0.875rem 1rem;
    text-align: center;
    font-size: 0.875rem;
    font-weight: 600;
    line-height: 1.4;
  }

  .column-result.negative {
    background: theme("colors.accent.error-bg");
    color: theme("colors.accent.error-text");
    border: 1px solid theme("colors.accent.error-border");
  }

  .column-result.positive {
    background: theme("colors.accent.success-bg");
    color: theme("colors.accent.success-text");
    border: 1px solid theme("colors.accent.success-border");
  }

  .infographic-caption {
    text-align: center;
    font-size: 0.9375rem;
    font-style: italic;
    color: theme("colors.secondary");
    margin-top: 1rem;
    padding: 0 1rem;
  }

  /* Responsive */
  @media (max-width: 640px) {
    .timeline-container {
      padding: 1.5rem 1rem 1rem;
    }

    .timeline-line {
      left: 5%;
      right: 5%;
    }

    .step {
      width: auto;
      min-width: 0;
    }

    .leverage-zone-highlight {
      left: 15%;
      width: 45%;
      bottom: auto;
      height: 4rem;
    }

    .leverage-zone-label {
      font-size: 0.5rem;
    }

    .leverage-zone-label svg {
      width: 0.625rem;
      height: 0.625rem;
    }

    .step-marker {
      width: 2rem;
      height: 2rem;
      margin-bottom: 0.875rem;
    }

    .step-marker svg {
      width: 1rem;
      height: 1rem;
    }

    .step-label {
      font-size: 0.6875rem;
      max-width: 3rem;
    }

    .leverage-comparison {
      margin-top: 1rem;
      padding-top: 1rem;
    }

    .comparison-grid {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .flow-sequence {
      padding: 0.75rem 0.5rem;
      gap: 0.375rem;
    }

    .flow-text {
      font-size: 0.625rem;
    }

    .column-result {
      font-size: 0.6875rem;
      padding: 0.625rem 0.75rem;
    }
  }
</style>
