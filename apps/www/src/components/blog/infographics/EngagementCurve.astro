---
/**
 * Engagement Curve Infographic
 * Shows cumulative reply rate over time from pilot data:
 * - 40% reply within 1 hour
 * - 85% reply within 24 hours
 */
---

<figure class="infographic-engagement">
  <div class="engagement-container">
    <div class="engagement-header">
      <span class="eyebrow">Pilot Results: Customer Reply Rates</span>
    </div>

    <div class="curve-visualization">
      <!-- Y-axis -->
      <div class="y-axis">
        <span class="axis-label">100%</span>
        <span class="axis-label">75%</span>
        <span class="axis-label">50%</span>
        <span class="axis-label">25%</span>
        <span class="axis-label">0%</span>
      </div>

      <!-- Chart area -->
      <div class="chart-area">
        <!-- Grid lines -->
        <div class="grid-lines">
          <div class="grid-line"></div>
          <div class="grid-line"></div>
          <div class="grid-line"></div>
          <div class="grid-line"></div>
          <div class="grid-line"></div>
        </div>

        <!-- Curve SVG -->
        <svg class="curve-svg" viewBox="0 0 400 200" preserveAspectRatio="none">
          <!-- Filled area under curve -->
          <path
            d="M0 200 L0 140 Q20 100 50 85 Q100 55 150 40 Q200 28 250 22 Q300 18 350 16 Q380 15 400 15 L400 200 Z"
            fill="url(#curveGradient)"></path>
          <!-- Curve line -->
          <path
            d="M0 140 Q20 100 50 85 Q100 55 150 40 Q200 28 250 22 Q300 18 350 16 Q380 15 400 15"
            stroke="currentColor"
            stroke-width="3"
            fill="none"
            class="curve-line"></path>
          <defs>
            <linearGradient id="curveGradient" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" style="stop-color: var(--gradient-start); stop-opacity: 0.4"></stop>
              <stop offset="100%" style="stop-color: var(--gradient-end); stop-opacity: 0.05"
              ></stop>
            </linearGradient>
          </defs>
        </svg>

        <!-- Callout: 1 hour (40%) -->
        <div class="callout callout-1hr">
          <div class="callout-line"></div>
          <div class="callout-dot"></div>
          <div class="callout-label">
            <span class="callout-stat">40%</span>
            <span class="callout-time">within 1 hour</span>
          </div>
        </div>

        <!-- Callout: 24 hours (85%) -->
        <div class="callout callout-24hr">
          <div class="callout-line"></div>
          <div class="callout-dot"></div>
          <div class="callout-label">
            <span class="callout-stat">85%</span>
            <span class="callout-time">within 24 hours</span>
          </div>
        </div>

        <!-- X-axis labels -->
        <div class="x-axis">
          <span class="axis-label">0</span>
          <span class="axis-label">1hr</span>
          <span class="axis-label">6hr</span>
          <span class="axis-label">12hr</span>
          <span class="axis-label">24hr</span>
        </div>
      </div>
    </div>

    <!-- Key insight cards -->
    <div class="insight-cards">
      <div class="insight-card">
        <div class="insight-icon fast">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"></path>
          </svg>
        </div>
        <div class="insight-content">
          <span class="insight-stat">40%</span>
          <span class="insight-label">replied within the first hour</span>
        </div>
      </div>

      <div class="insight-card">
        <div class="insight-icon complete">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
        </div>
        <div class="insight-content">
          <span class="insight-stat">85%</span>
          <span class="insight-label">replied within 24 hours</span>
        </div>
      </div>

      <div class="insight-card highlight">
        <div class="insight-icon surprise">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path
              d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"
            ></path>
          </svg>
        </div>
        <div class="insight-content">
          <span class="insight-stat">Most</span>
          <span class="insight-label">replied even when nothing was "wrong"</span>
        </div>
      </div>
    </div>
  </div>

  <figcaption class="infographic-caption">
    Proactive SMS engagement from our first pilot. Most customers replied quickly.
  </figcaption>
</figure>

<style>
  .infographic-engagement {
    margin: 2.5rem 0;
    padding: 0;
    --gradient-start: theme('colors.accent.success-border');
    --gradient-end: theme('colors.accent.success-bg');
  }

  .engagement-container {
    background: linear-gradient(
      135deg,
      theme('colors.surface.elevated') 0%,
      theme('colors.surface.subtle') 100%
    );
    border: 1px solid theme('colors.border.DEFAULT');
    border-radius: 0.75rem;
    padding: 2rem 1.5rem 1.5rem;
  }

  .engagement-header {
    text-align: center;
    margin-bottom: 1.5rem;
  }

  .engagement-header .eyebrow {
    color: theme('colors.secondary');
  }

  .curve-visualization {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }

  .y-axis {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 0.5rem 0;
    min-width: 2.5rem;
  }

  .y-axis .axis-label {
    font-size: 0.625rem;
    color: theme('colors.tertiary');
    text-align: right;
    line-height: 1;
  }

  .chart-area {
    flex: 1;
    position: relative;
    height: 200px;
    background: theme('colors.surface.base');
    border: 1px solid theme('colors.border.DEFAULT');
    border-radius: 0.5rem;
    overflow: hidden;
  }

  .grid-lines {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 0;
  }

  .grid-line {
    height: 1px;
    background: theme('colors.border.DEFAULT');
    opacity: 0.5;
  }

  .curve-svg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: calc(100% - 1.5rem);
    color: theme('colors.accent.success-text');
  }

  .curve-line {
    stroke: theme('colors.accent.success-text');
  }

  .x-axis {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-between;
    padding: 0.25rem 0.5rem;
    background: theme('colors.surface.subtle');
    border-top: 1px solid theme('colors.border.DEFAULT');
  }

  .x-axis .axis-label {
    font-size: 0.625rem;
    color: theme('colors.tertiary');
  }

  /* Callouts */
  .callout {
    position: absolute;
  }

  .callout-1hr {
    left: 12.5%;
    top: 0;
    bottom: 1.5rem;
  }

  .callout-24hr {
    right: 12.5%;
    top: 0;
    bottom: 1.5rem;
  }

  .callout-line {
    position: absolute;
    width: 1px;
    top: 0;
    bottom: 0;
    background: theme('colors.accent.success-border');
    opacity: 0.6;
  }

  .callout-dot {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: theme('colors.accent.success-text');
    border: 2px solid theme('colors.surface.base');
    left: -4px;
    box-shadow: 0 0 0 2px theme('colors.accent.success-bg');
  }

  .callout-1hr .callout-dot {
    top: 57%;
  }

  .callout-24hr .callout-dot {
    top: 8%;
  }

  .callout-label {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0.375rem 0.5rem;
    background: theme('colors.accent.success-bg');
    border: 1px solid theme('colors.accent.success-border');
    border-radius: 0.375rem;
    white-space: nowrap;
    left: 50%;
    transform: translateX(-50%);
  }

  .callout-1hr .callout-label {
    top: 65%;
  }

  .callout-24hr .callout-label {
    top: 15%;
  }

  .callout-stat {
    font-size: 1rem;
    font-weight: 700;
    color: theme('colors.accent.success-text');
    line-height: 1;
  }

  .callout-time {
    font-size: 0.5625rem;
    color: theme('colors.accent.success-text');
    text-transform: uppercase;
    letter-spacing: 0.02em;
  }

  /* Insight cards */
  .insight-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }

  .insight-card {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.875rem;
    background: theme('colors.surface.base');
    border: 1px solid theme('colors.border.DEFAULT');
    border-radius: 0.625rem;
  }

  .insight-card.highlight {
    background: theme('colors.accent.success-bg');
    border-color: theme('colors.accent.success-border');
  }

  .insight-icon {
    width: 2.25rem;
    height: 2.25rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .insight-icon.fast {
    background: theme('colors.accent.success-bg');
    border: 1px solid theme('colors.accent.success-border');
  }

  .insight-icon.fast svg {
    color: theme('colors.accent.success-text');
  }

  .insight-icon.complete {
    background: theme('colors.accent.success-bg');
    border: 1px solid theme('colors.accent.success-border');
  }

  .insight-icon.complete svg {
    color: theme('colors.accent.success-text');
  }

  .insight-icon.surprise {
    background: theme('colors.surface.subtle');
    border: 1px solid theme('colors.accent.primary');
  }

  .insight-icon.surprise svg {
    color: theme('colors.accent.primary');
  }

  .insight-icon svg {
    width: 1.125rem;
    height: 1.125rem;
  }

  .insight-content {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
  }

  .insight-stat {
    font-size: 1.125rem;
    font-weight: 700;
    color: theme('colors.primary');
    line-height: 1;
  }

  .insight-card.highlight .insight-stat {
    color: theme('colors.accent.success-text');
  }

  .insight-label {
    font-size: 0.6875rem;
    color: theme('colors.secondary');
    line-height: 1.3;
  }

  .insight-card.highlight .insight-label {
    color: theme('colors.accent.success-text');
  }

  .infographic-caption {
    text-align: center;
    font-size: 0.9375rem;
    font-style: italic;
    color: theme('colors.secondary');
    margin-top: 1rem;
    padding: 0 1rem;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .engagement-container {
      padding: 1.5rem 1rem;
    }

    .curve-visualization {
      margin-bottom: 1rem;
    }

    .chart-area {
      height: 160px;
    }

    .insight-cards {
      grid-template-columns: 1fr;
      gap: 0.75rem;
    }

    .insight-card {
      padding: 0.75rem;
    }

    .insight-icon {
      width: 2rem;
      height: 2rem;
    }

    .insight-icon svg {
      width: 1rem;
      height: 1rem;
    }

    .insight-stat {
      font-size: 1rem;
    }

    .callout-label {
      padding: 0.25rem 0.375rem;
    }

    .callout-stat {
      font-size: 0.875rem;
    }

    .callout-time {
      font-size: 0.5rem;
    }
  }
</style>
